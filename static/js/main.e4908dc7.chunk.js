(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var r,a=n(0),u=n.n(a),c=n(14),i=n.n(c),o=n(50),s=n(51),l=n(63),f=n(52),b=n(65),d=n(61),p=n(15),m=n(121),g=n(3),h={isOpenListModal:!1,setIsOpenListModal:function(e,t){e.isOpenListModal=t},toggleOpenListModal:function(e){e.isOpenListModal=!e.isOpenListModal}},v=n(9),O=n.n(v),y=n(19),w=n(53),j=n.n(w).a.create({baseURL:"/training-reading-and-listening"}),E=[{link:"https://www.youtube.com/watch?v=XfAMirWVpjQ",subtitle:"[DownSub.com] Do I speak slowly_ [How to understand native English speakers].srt"},{link:"https://www.youtube.com/watch?v=o8NPllzkFhE",subtitle:"[DownSub.com] Who I'm Voting for President re_ Casey Neistat.srt"},{link:"https://youtu.be/quJdL9ggETI",subtitle:"[DownSub.com] Margaret Gould Stewart_ How giant websites design for you (and a billion others, too).srt"},{link:"https://youtu.be/H2QxFM9y0tY",subtitle:"[DownSub.com] The disarming case to act right now on climate change _ Greta Thunberg.srt"},{link:"https://youtu.be/pj8n78AuN3w",subtitle:"[DownSub.com] YouTube's Rules Don't Apply to Everyone.srt"},{link:"https://youtu.be/jAhjPd4uNFY",subtitle:"[DownSub.com] Genetic Engineering Will Change Everything Forever \u2013 CRISPR.srt"},{link:"https://youtu.be/DHg5j9cTb2k?t=32",subtitle:"[DownSub.com] Genetic Engineering Will Change Everything Forever \u2013 CRISPR.srt"},{link:"https://www.youtube.com/watch?time_continue=0&v=5VE9nihee7o",subtitle:"[DownSub.com] Hillary Clinton_ The Vox Conversation.srt"}];function k(e){var t=e.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|attribution_link\?a=.+?watch.+?v(?:%|=)))((\w|-){11})(?:\S+)?$/);return String(t[1])}!function(e){e.YOUTUBE="youtube",e.AUDIO="audio"}(r||(r={}));var S={items:[],isFetching:!0,add:function(e,t){e.items.push(t)},delete:function(e,t){var n=e.items.findIndex(function(e){return e.id===t});e.items.splice(n,1)},deleteAll:function(e){e.items=[]},setItems:function(e,t){e.items=t},setFetching:function(e,t){e.isFetching=t},clear:Object(g.e)(function(){var e=Object(y.a)(O.a.mark(function e(t){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.deleteAll(null),t.syncWithLocalstorage(null);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),fetch:Object(g.e)(function(){var e=Object(y.a)(O.a.mark(function e(t){var n,a,u,c,i,o,s;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setFetching(!0),!(n=localStorage.getItem("app_items"))){e.next=7;break}return a=JSON.parse(n),t.setItems(a),t.setFetching(!1),e.abrupt("return");case 7:u=[],c=0;case 9:if(!(c<E.length)){e.next=19;break}return i=E[c],e.next=13,j.get("/".concat(i.subtitle));case 13:o=e.sent,s={id:c,plainSubtitles:o.data,source:r.YOUTUBE,url:k(i.link)},u.push(s);case 16:c++,e.next=9;break;case 19:t.setItems(u),t.syncWithLocalstorage(null),t.setFetching(!1);case 22:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),syncWithLocalstorage:function(e){localStorage.setItem("app_items",JSON.stringify(e.items))},listeners:Object(g.c)(function(e){e(S.delete,function(e){e.syncWithLocalstorage(null)})})},I=S,T=n(56),C={subtitles:[],isFetching:!0,setSubtitles:function(e,t){e.subtitles=t},setFetching:function(e,t){e.isFetching=t},fetchSubtitlesFromTasksStore:Object(g.e)(function(){var e=Object(y.a)(O.a.mark(function e(t,n,r){var a,u,c,i;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getState(),u=Number(n),c=a.getTaskById(u)){e.next=5;break}return e.abrupt("return");case 5:i=T.parse(c.plainSubtitles),t.setSubtitles(i),t.setFetching(!1);case 8:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}())},L=n(8),x={app:h,tasks:I,player:C,getTaskById:Object(g.d)(function(e){return function(t){var n=e.tasks.items.filter(function(e){return e.id===t});return Object(L.a)(n,1)[0]}})},R=n(32),D=n(57),_=new Promise(function(e){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.onYouTubeIframeAPIReady=function(){return e(window.YT)}}),F=function(e){var t=e.id,n=e.videoId,r=e.events,a=e.playerVars,u=Object(D.a)(e,["id","videoId","events","playerVars"]);return new Promise(function(){var e=Object(y.a)(O.a.mark(function e(c,i){var o,s,l,f;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_;case 2:return o=e.sent,s=null!==document.querySelector("#".concat(t)),l=Object(R.a)({},r,{onReady:function(){c(f)}}),s||console.warn("YouTube hook: div #".concat(t," not found.")),f=new o.Player(t,Object(R.a)({},u,{videoId:n,playerVars:a,events:l})),e.abrupt("return",f);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},N=0;function M(e){return!e||0===e.length}var P=function(e,t){var n=Object(a.useState)(null),r=Object(L.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(-1),s=Object(L.a)(o,2),l=s[0],f=(s[1],Object(a.useMemo)(function(){return function(e){var t=++N;return String(e)+t}("unq-yt-id-")},[])),b=Object(a.useRef)(null),d=Object(a.useRef)(null),p=Object(a.useRef)(null),m=Object(a.useRef)(null),g=Object(a.useRef)(null),h=Object(a.useRef)(null);Object(a.useEffect)(function(){t&&(b.current=t.events&&t.events.onReady,d.current=t.events&&t.events.onStateChange,p.current=t.events&&t.events.onPlaybackQualityChange,m.current=t.events&&t.events.onPlaybackRateChange,g.current=t.events&&t.events.onError,h.current=t.events&&t.events.onApiChange)});var v=!M(e)&&u.a.createElement("div",{id:f});return Object(a.useEffect)(function(){if(!M(e)){var n=t&&t.playerVars||{},r={width:t.width,height:t.height,id:f,videoId:e,playerVars:n},a={onReady:function(e){return b.current&&b.current(e)},onStateChange:function(e){return d.current&&d.current(e)},onPlaybackQualityChange:function(e){return p.current&&p.current(e)},onPlaybackRateChange:function(e){return m.current&&m.current(e)},onError:function(e){return g.current&&g.current(e)},onApiChange:function(e){return h.current&&h.current(e)}};return c?c.cueVideoById(e):function(){u.apply(this,arguments)}(),function(){console.log("return")}}function u(){return(u=Object(y.a)(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(Object(R.a)({},r,{events:a}));case 2:return t=e.sent,e.abrupt("return",i(t));case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}},[e]),{video:v,player:c,state:l}},A=n(27),V=n(64),B=n(62);function Y(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(a.useRef)(new Set([])),u=Object(a.useRef)({targetKeys:[],callback:function(){},preventDefault:!0});Object(a.useEffect)(function(){u.current={targetKeys:e,callback:t,preventDefault:n}},[].concat(Object(B.a)(e),[t,n]));var c=Object(a.useCallback)(function(e){r.current.add(e.key),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.length!==t.length)return!1;var n=new Set(e);return t.forEach(function(e){n.delete(e)}),0===n.size}(u.current.targetKeys,Array.from(r.current))&&u.current.preventDefault&&(e.preventDefault(),u.current.callback())},[]),i=Object(a.useCallback)(function(e){r.current.delete(e.key)},[]);Object(a.useEffect)(function(){return window.addEventListener("keydown",c),window.addEventListener("keyup",i),function(){window.removeEventListener("keydown",c),window.removeEventListener("keyup",i)}},[c,i])}var W=n(28),J=n.n(W);var U=JSON.stringify;var q=function(e){var t=e.match.params.id,n=Object(g.f)(function(e){return{setIsOpenListModal:e.app.setIsOpenListModal,onFetchSubtitlesFromTasksStore:e.player.fetchSubtitlesFromTasksStore}}).onFetchSubtitlesFromTasksStore,r=(Object(a.useRef)(0),Object(a.useRef)(0),Object(a.useRef)(-1),Object(a.useState)(0)),c=Object(L.a)(r,2),i=c[0],o=c[1],s=Object(a.useState)(0),l=Object(L.a)(s,2),f=(l[0],l[1],Object(a.useState)(-1)),b=Object(L.a)(f,2),d=b[0],m=(b[1],Object(a.useState)(!1)),h=Object(L.a)(m,2),v=h[0],O=(h[1],Object(g.g)(function(e){return e.getTaskById(Number(t))},[t])),y=Object(g.g)(function(e){return e.tasks},[t]),w=Object(g.g)(function(e){return e.player},[t]);if(w.subtitles.length,Object(a.useEffect)(function(){y.isFetching||n(t)},[t,y.isFetching]),!t)return u.a.createElement(p.a,{to:"/"});var j=Object(A.get)(O,"url"),E=P(j,{width:"100%",height:"100%",playerVars:{start:1,fs:0,rel:0,disablekb:1,modestbranding:3}}),k=E.video,S=E.player;function I(e){if(S){console.log("......................",e?"next":"prev");var t=S.getCurrentTime();console.log("plainCurrentTime = ",t);var n=function(e){var t=e.toString().split("."),n=Object(L.a)(t,2),r=n[0],a=n[1],u=String(a+"000").substr(0,3),c="".concat(r).concat(u);return Number(c)}(t),r=function(e){console.log("time = ",e);for(var t=0;t<w.subtitles.length;t++){var n=w.subtitles[t];if(e>=n.start&&e<=n.end)return console.log("time.start = ",n.start),console.log("time.end = ",n.end),t}}(n);if(void 0!==r){var a=w.subtitles[r],u=w.subtitles[r+1],c=w.subtitles[r-1];if(e){if(!u)return;console.log("Next",u),S.seekTo((u.start-200)/1e3,!0)}else{var i=n-a.start;i<800&&c&&(console.log("Prev",c),S.seekTo(c.start/1e3,!0)),i>800&&(console.log("Current",a),S.seekTo(a.start/1e3,!0))}}else{var o=w.subtitles[0];S.seekTo(o.start/1e3,!0)}}}function T(e){var t=Number(e);if(S){var n=S.getDuration()/10*t,r=0===t?0:n;S.seekTo(r,!0)}}return Y([" "],function(){S&&(1===S.getPlayerState()?S.pauseVideo():S.playVideo())}),Y(["ArrowLeft"],function(){S&&I(!1)}),Y(["ArrowRight"],function(){S&&I(!0)}),Y(["1"],function(){return T("1")}),Y(["2"],function(){return T("2")}),Y(["3"],function(){return T("3")}),Y(["4"],function(){return T("4")}),Y(["5"],function(){return T("5")}),Y(["6"],function(){return T("6")}),Y(["7"],function(){return T("7")}),Y(["8"],function(){return T("8")}),Y(["9"],function(){return T("9")}),Y(["0"],function(){return T("0")}),function(e,t){var n=Object(a.useRef)(e);Object(a.useEffect)(function(){n.current=e}),Object(a.useEffect)(function(){if(null!==t){var e=setInterval(function(){n.current()},t);return function(){return clearInterval(e)}}},[t])}(function(){S&&o(S.getCurrentTime())},300),u.a.createElement("div",null,u.a.createElement("div",{style:{height:"100vh"}},k),u.a.createElement(V.a,{onClick:function(){return S.playVideo()},text:"play"}),u.a.createElement(V.a,{onClick:function(){return S.pauseVideo()},text:"pause"}),u.a.createElement(V.a,{onClick:function(){return S.setVolume(70)},text:"set vol"}),u.a.createElement("div",{className:J.a.container},u.a.createElement("div",null),u.a.createElement(function(){var e=w.subtitles[d],t=w.subtitles[d+1];function n(e){return u.a.createElement("div",{className:J.a.SubtitlesDebugItem},u.a.createElement("div",{className:J.a.SubtitlesDebugTime},u.a.createElement("div",null,"start: ",U(Object(A.get)(e,"start"))),u.a.createElement("div",null,"end: ",U(Object(A.get)(e,"end"))),u.a.createElement("div",null,"show?: ",U(v))),u.a.createElement("pre",null,U(Object(A.get)(e,"text"))))}return u.a.createElement("div",{className:J.a.SubtitlesDebug},u.a.createElement("h3",null,"Current: ",d,", time: ",i),n(e),u.a.createElement("h3",null,"Next:"),n(t))},null)))};n(108),n(109);function H(){var e=Object(g.f)(function(e){return{setIsOpenListModal:e.app.setIsOpenListModal}}).setIsOpenListModal;return Object(a.useEffect)(function(){setTimeout(function(){e(!0)},400)},[]),null}var G=n(119),Q=n(120),K=n(30),z=n(60),X=n.n(z),Z=function(e){return!e},$=function(){var e=Object(a.useState)(!0),t=Object(L.a)(e,2)[1];return function(){t(Z)}},ee=function(){var e=$(),t=Object(a.useContext)(p.d);if(!t)throw new Error("use-react-router may only be used within a react-router context.");return Object(a.useEffect)(function(){return t.history.listen(e)},[t]),t};function te(e){var t=Object(g.g)(function(e){return e.tasks}),n=Object(g.g)(function(e){return e.app.isOpenListModal}),r=ee().history,c=Object(g.f)(function(e){return{onFetch:e.tasks.fetch,onDelete:e.tasks.delete,setIsOpenListModal:e.app.setIsOpenListModal}}),i=c.onFetch,o=c.onDelete,s=c.setIsOpenListModal;function l(){return t.items.map(function(e,t){var n="https://i.ytimg.com/vi/".concat(e.url,"/hqdefault.jpg"),a="https://youtu.be/".concat(e.url);return u.a.createElement("tr",{onClick:function(){return t=e.id,r.push("/play/".concat(t)),void console.log("handleTableRowClick");var t},key:t},u.a.createElement("td",{style:{width:120,textAlign:"center"}},u.a.createElement("a",{href:a,target:"_blank"},u.a.createElement("img",{className:X.a.image,src:n,alt:""}))),u.a.createElement("td",null,u.a.createElement("h4",null,"# ",e.id)),u.a.createElement("td",{style:{width:80,textAlign:"center",verticalAlign:"middle"}},u.a.createElement(V.a,{intent:"danger",icon:"delete",onClick:function(t){return function(e,t){o(t),e.stopPropagation()}(t,e.id)}})))})}return Object(a.useEffect)(function(){i()},[]),u.a.createElement(Q.a,{style:{width:"70%"},icon:"info-sign",title:"List",isOpen:n,onClose:function(){return s(!1)},usePortal:!0,className:K.a.OVERLAY_SCROLL_CONTAINER},u.a.createElement("div",{style:{overflow:"scroll",height:"70vh"}},u.a.createElement(G.a,{style:{width:"100%"},interactive:!0,bordered:!0},u.a.createElement("tbody",null,l()))))}function ne(){var e=Object(g.f)(function(e){return{toggleOpenListModal:e.app.toggleOpenListModal,onTaskClear:e.tasks.deleteAll}}),t=e.onTaskClear,n=e.toggleOpenListModal;return Y(["Shift","J"],function(){n()}),Y(["Shift","R"],function(){confirm("Clear LocalStorage?")&&t(void 0)}),u.a.createElement(te,null)}m.a.onlyShowFocusOnTabs();var re=Object(g.b)(x),ae=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement(g.a,{store:re},u.a.createElement(d.a,{basename:"/training-reading-and-listening"},u.a.createElement("div",null,u.a.createElement(p.b,{exact:!0,path:"/",component:H}),u.a.createElement(p.b,{path:"/play/:id",component:q}),u.a.createElement(p.b,{exact:!0,path:"/play",component:q}),u.a.createElement(ne,null))))}}]),t}(a.Component);i.a.render(u.a.createElement(ae,null),document.getElementById("root"))},28:function(e,t,n){e.exports={container:"Player_container__1Yacn",SubtitlesDebug:"Player_SubtitlesDebug__t0saq",SubtitlesDebugItem:"Player_SubtitlesDebugItem__2BZE7",SubtitlesDebugTime:"Player_SubtitlesDebugTime__3Ftel"}},60:function(e,t,n){e.exports={image:"Tasks_image__3yXbi"}},72:function(e,t,n){e.exports=n(117)}},[[72,1,2]]]);
//# sourceMappingURL=main.e4908dc7.chunk.js.map