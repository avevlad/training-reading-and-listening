{"version":3,"sources":["store/tasks.store.ts","store/app.store.ts","utils/axios.ts","misc/default-task.js","utils/parse-youtube-url.ts","store/player.store.ts","store/index.ts","store/selectors.ts","hooks/useYoutube.tsx","components/Player/Player.tsx","components/Home/Home.tsx","hooks/useForceUpdate.ts","hooks/useReactRouter.ts","components/Tasks/Tasks.tsx","hooks/useMultiKeyPressCallback.ts","components/Common/Common.tsx","components/App/App.tsx","index.tsx","components/Tasks/Tasks.module.css"],"names":["TaskSource","store","isOpenListModal","setIsOpenListModal","state","payload","toggleOpenListModal","instance","axios","create","baseURL","process","default_task","link","subtitle","parseYoutubeUrl","url","res","match","String","items","isFetching","add","push","delete","index","findIndex","__","id","splice","setItems","setFetching","fetch","thunk","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","actions","raw","tasks","defaultTasks","i","defaultTaskListElement","t","wrap","_context","prev","next","localStorage","getItem","JSON","parse","abrupt","defaultTaskList","length","get","concat","sent","plainSubtitles","data","source","YOUTUBE","syncWithLocalstorage","stop","this","_x","apply","arguments","setItem","stringify","listeners","listen","on","subtitles","setSubtitles","fetchSubtitlesFromTasksStore","helpers","task","sb","getState","Number","getTaskById","subtitleLib","_x2","_x3","src_store","app","player","select","_state$tasks$items$fi","filter","item","slicedToArray","YTScriptLoad","Promise","tag","document","createElement","src","firstScriptTag","getElementsByTagName","parentNode","insertBefore","window","onYouTubeIframeAPIReady","YT","BuildYTPlayer","options","videoId","events","playerVars","resolve","reject","YTp","isExist","finishEvents","querySelector","objectSpread","onReady","console","warn","Player","height","width","idCounter","isEmpty","str","useYoutube","props","_useState","useState","_useState2","setPlayer","_useState3","_useState4","setState","htmlId","useMemo","prefix","uniqueId","video","react_default","useEffect","opt","cueVideoById","_load","load","log","_callee2","ytPlayer","_context2","onStateChange","getPlayerState","target","params","onFetchSubtitlesFromTasksStore","useActions","currentTask","useStore","s","tasksState","react_router","to","_useYoutube","controls","start","fs","rel","showinfo","ecver","disablekb","setVolume","tasksButton","map","key","react_router_dom","buttons","onClick","text","playVideo","pauseVideo","Home","setTimeout","toggle","useForceUpdate","useRouter","forceUpdate","routerContext","useContext","__RouterContext","Error","history","Tasks","_useActions","onFetch","onDelete","renderTableList","img","style","textAlign","href","className","styles","image","alt","verticalAlign","intent","icon","e","stopPropagation","handleDeleteRowClick","dialog","title","isOpen","onClose","usePortal","Classes","OVERLAY_SCROLL_CONTAINER","overflow","htmlTable","interactive","bordered","useMultiKeyPressCallback","targetKeys","callback","preventDefault","undefined","pressedKeysRef","useRef","Set","current","toConsumableArray","downHandler","useCallback","keys","pressedKeys","keysToCheck","forEach","size","areKeysPressed","Array","from","upHandler","addEventListener","removeEventListener","Common","FocusStyleManager","onlyShowFocusOnTabs","createStore","plainStore","App","easy_peasy_esm","basename","exact","path","component","Component","ReactDOM","render","components_App_App","getElementById","module","exports"],"mappings":"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","file":"static/js/main.5bc34c7c.chunk.js","sourcesContent":["import axios from '../utils/axios';\nimport { Action, listen, Listen, thunk, Thunk } from 'easy-peasy';\nimport defaultTaskList from \"../misc/default-task.js\";\nimport parseYoutubeUrl from \"../utils/parse-youtube-url\";\n\nexport enum TaskSource {\n  YOUTUBE = 'youtube',\n  AUDIO = 'audio',\n}\n\nexport interface Task {\n  id: number,\n  url: string,\n  source: TaskSource,\n  plainSubtitles: string,\n}\n\nexport interface ITasksState {\n  items: Task[],\n  isFetching: boolean,\n  listeners: Listen<ITasksActions>;\n}\n\ninterface ITasksActions {\n  add: Action<ITasksState, Task>,\n  delete: Action<ITasksState, number>,\n  setItems: Action<ITasksState, Task[]>,\n  setFetching: Action<ITasksState, boolean>,\n  syncWithLocalstorage: Action<ITasksState>;\n  fetch: Thunk<ITasksActions>;\n}\n\nexport type ITasksStore = ITasksState & ITasksActions;\n\nconst store: ITasksStore = {\n  items: [],\n  isFetching: true,\n  add: (state, payload) => {\n    state.items.push(payload)\n  },\n  delete: (state, payload) => {\n    let index = state.items.findIndex(__ => __.id === payload);\n    state.items.splice(index, 1)\n  },\n  setItems: (state, payload) => {\n    state.items = payload;\n  },\n  setFetching: (state, payload) => {\n    state.isFetching = payload;\n  },\n  fetch: thunk(async (actions) => {\n    actions.setFetching(true);\n    const raw = localStorage.getItem(\"app_items\");\n    if (raw) {\n      const tasks = JSON.parse(raw);\n      actions.setItems(tasks);\n      actions.setFetching(false);\n      return;\n    }\n\n    const defaultTasks = [];\n\n    for (let i = 0; i < defaultTaskList.length; i++) {\n      const defaultTaskListElement = defaultTaskList[i];\n      const res = await axios.get(`/${defaultTaskListElement.subtitle}`);\n      const t: Task = {\n        id: i,\n        plainSubtitles: res.data,\n        source: TaskSource.YOUTUBE,\n        url: parseYoutubeUrl(defaultTaskListElement.link),\n      };\n      defaultTasks.push(t);\n    }\n\n    actions.setItems(defaultTasks);\n    actions.syncWithLocalstorage(null);\n    actions.setFetching(false);\n  }),\n  syncWithLocalstorage: (state) => {\n    localStorage.setItem(\"app_items\", JSON.stringify(state.items));\n  },\n  listeners: listen(on => {\n    on(store.delete, (actions) => {\n      actions.syncWithLocalstorage(null);\n    });\n  })\n};\n\nexport default store;\n","import { Action } from \"easy-peasy\";\n\ninterface IAppState {\n  isOpenListModal: boolean,\n}\n\nexport interface IAppActions {\n  setIsOpenListModal: Action<IAppState, boolean>,\n  toggleOpenListModal: Action<IAppState, undefined>,\n}\n\nexport type IAppStore = IAppState & IAppActions;\n\nconst store: IAppStore = {\n  isOpenListModal: false,\n  setIsOpenListModal: (state, payload) => {\n    state.isOpenListModal = payload\n  },\n  toggleOpenListModal: (state) => {\n    state.isOpenListModal = !state.isOpenListModal\n  }\n};\n\nexport default store;\n","import axios from 'axios';\n\nconst instance = axios.create({\n  baseURL: process.env.PUBLIC_URL,\n});\n\nexport default instance;\n","export default [\n  {\n    link: \"https://www.youtube.com/watch?v=PjTc-EiwHqc\",\n    subtitle: \"[DownSub.com] Who I'm Voting for President re_ Casey Neistat.srt\",\n  },\n  {\n    link: \"https://youtu.be/quJdL9ggETI\",\n    subtitle: \"[DownSub.com] Margaret Gould Stewart_ How giant websites design for you (and a billion others, too).srt\",\n  },\n  {\n    link: \"https://youtu.be/H2QxFM9y0tY\",\n    subtitle: \"[DownSub.com] The disarming case to act right now on climate change _ Greta Thunberg.srt\",\n  },\n  {\n    link: \"https://youtu.be/pj8n78AuN3w\",\n    subtitle: \"[DownSub.com] YouTube's Rules Don't Apply to Everyone.srt\",\n  },\n  {\n    link: \"https://youtu.be/jAhjPd4uNFY\",\n    subtitle: \"[DownSub.com] Genetic Engineering Will Change Everything Forever – CRISPR.srt\",\n  },\n  {\n    link: \"https://youtu.be/DHg5j9cTb2k?t=32\",\n    subtitle: \"[DownSub.com] Genetic Engineering Will Change Everything Forever – CRISPR.srt\",\n  },\n  {\n    link: \"https://www.youtube.com/watch?time_continue=0&v=5VE9nihee7o\",\n    subtitle: \"[DownSub.com] Hillary Clinton_ The Vox Conversation.srt\",\n  },\n\n]\n","export default function parseYoutubeUrl(url: string): string {\n  const regexp = /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=|attribution_link\\?a=.+?watch.+?v(?:%|=)))((\\w|-){11})(?:\\S+)?$/;\n  const res = url.match(regexp);\n  return String(res![1]);\n}\n","import { Action, Select, select, thunk, Thunk } from 'easy-peasy';\n// @ts-ignore\nimport * as subtitleLib from 'subtitle';\nimport { IStore } from './index';\n\nexport interface ISubtitleItem {\n  start: number,\n  end: number,\n  text: string,\n  settings?: string,\n}\n\ninterface IPlayerState {\n  subtitles: ISubtitleItem[],\n  isFetching: boolean,\n}\n\ninterface IPlayerActions {\n  setSubtitles: Action<IPlayerState, ISubtitleItem[]>,\n  setFetching: Action<IPlayerState, boolean>,\n  fetchSubtitlesFromTasksStore: Thunk<IPlayerActions, string, any, IStore>;\n}\n\nexport type IPlayerStore = IPlayerState & IPlayerActions;\n\nconst store: IPlayerStore = {\n  subtitles: [],\n  isFetching: true,\n  setSubtitles: (state, payload) => {\n    state.subtitles = payload;\n  },\n  setFetching: (state, payload) => {\n    state.isFetching = payload;\n  },\n  fetchSubtitlesFromTasksStore: thunk(async (actions, payload, helpers) => {\n    const state = helpers.getState();\n    const id = Number(payload);\n    const task = state.getTaskById(id);\n\n    if (!task) {\n      return;\n    }\n\n    const sb = subtitleLib.parse(task.plainSubtitles);\n    actions.setSubtitles(sb);\n    actions.setFetching(false);\n  })\n};\n\nexport default store;\n","import { Select } from \"easy-peasy\";\n\nimport app, { IAppStore } from './app.store';\nimport tasks, { ITasksStore } from './tasks.store';\nimport player, { IPlayerStore } from './player.store';\nimport { getTaskById } from './selectors';\n\nexport interface IStore {\n  app: IAppStore,\n  tasks: ITasksStore,\n  player: IPlayerStore,\n  getTaskById: Select<IStore>,\n}\n\nexport default {\n  app,\n  tasks,\n  player,\n  // 👇 selectors\n  getTaskById,\n}\n","import { select } from 'easy-peasy';\nimport { IStore } from './index';\nimport { Task } from \"./tasks.store\";\n\nexport const getTaskById = select<IStore>(state => (id: number) => {\n  const [task] = state.tasks.items.filter((item: Task) => item.id === id);\n  return task;\n});\n","import React, { ReactNode, useState, useEffect, useMemo } from \"react\";\n\ndeclare global {\n  interface Window {\n    onYouTubeIframeAPIReady: any\n    YT: any\n  }\n}\n\ninterface BuildTYOptions {\n  id: string,\n  videoId: string,\n  events: any,\n  playerVars: any,\n}\n\nconst YTScriptLoad = new Promise(res => {\n  const tag = document.createElement('script');\n  tag.src = `https://www.youtube.com/iframe_api`;\n  const firstScriptTag = document.getElementsByTagName('script')[0];\n  firstScriptTag!.parentNode!.insertBefore(tag, firstScriptTag);\n  window.onYouTubeIframeAPIReady = () => res(window.YT);\n});\n\n\nconst BuildYTPlayer = (options: BuildTYOptions): any => {\n  const {id, videoId, events, playerVars} = options;\n\n  return new Promise(async (resolve, reject) => {\n    const YTp: any = await YTScriptLoad;\n    const isExist = document.querySelector(`#${id}`) !== null;\n    const finishEvents = {\n      ...events,\n      onReady() {\n        resolve(player);\n      },\n    };\n\n    if (!isExist) {\n      console.warn(`YouTube hook: div #${id} not found.`);\n    }\n\n    const player = new YTp.Player(id, {\n      videoId,\n      height: '390',\n      width: '640',\n      playerVars: playerVars,\n      events: finishEvents,\n    });\n\n    return player;\n  })\n};\n\nlet idCounter = 0;\n\nfunction isEmpty(str: string): boolean {\n  return (!str || 0 === str.length);\n}\n\nfunction uniqueId(prefix: string) {\n  let id = ++idCounter;\n  return String(prefix) + id;\n}\n\nexport interface YoutubeHookProps {\n  playerVars?: YT.PlayerVars,\n  events?: YT.Events,\n}\n\n\nexport interface YoutubeHookResult {\n  video: ReactNode,\n  player: YT.Player | null,\n  state: YT.PlayerState,\n}\n\nfunction useYoutube(videoId: string, props?: YoutubeHookProps): YoutubeHookResult {\n  const [player, setPlayer] = useState<YT.Player | null>(null);\n  const [state, setState] = useState<YT.PlayerState>(-1);\n  const htmlId = useMemo(() => uniqueId('unq-yt-id-'), []);\n\n  const video = !isEmpty(videoId) && <div id={htmlId}/>;\n\n  useEffect(() => {\n    if (isEmpty(videoId)) {\n      return;\n    }\n\n    const playerVars = (props && props.playerVars) || {};\n    const events = (props && props.events) || {};\n    // const onStateChange = (props && props.events && props.events.onStateChange);\n\n    const opt = {\n      id: htmlId,\n      videoId,\n      playerVars,\n    };\n\n    async function load() {\n      const ytPlayer = await BuildYTPlayer({\n        ...opt,\n        events: {\n          ...events,\n          onStateChange: (data: YT.OnStateChangeEvent) => {\n            setState(ytPlayer.getPlayerState());\n            events.onStateChange && events.onStateChange(data);\n          },\n        }\n      });\n      events.onReady && events.onReady({target: ytPlayer});\n      return setPlayer(ytPlayer);\n    }\n\n    if (!player) {\n      load();\n    } else {\n      player.cueVideoById(videoId);\n    }\n\n    return () => {\n      console.log(\"return\");\n    };\n\n  }, [videoId]);\n\n  return {video, player, state};\n}\n\n\nexport default useYoutube;\n","import React, { useEffect } from 'react';\nimport { Actions, State, useActions, useStore } from \"easy-peasy\";\nimport { IStore } from \"../../store\";\nimport useYoutube from \"../../hooks/useYoutube\";\nimport { Redirect } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport { get } from 'lodash';\nimport { Button } from '@blueprintjs/core';\n\ninterface PlayerProps {\n  [key: string]: any;\n}\n\n/**\n * TODO: autoplay\n * @param props\n * @constructor\n */\nfunction Player(props: PlayerProps) {\n  const id = props.match.params.id;\n  const {\n    onFetchSubtitlesFromTasksStore,\n  } = useActions((a: Actions<IStore>) => ({\n    setIsOpenListModal: a.app.setIsOpenListModal,\n    onFetchSubtitlesFromTasksStore: a.player.fetchSubtitlesFromTasksStore,\n  }));\n  const currentTask = useStore((s: State<IStore>) => s.getTaskById(Number(id)), [id]);\n  const tasksState = useStore((s: State<IStore>) => s.tasks, [id]);\n  const playerState = useStore((s: State<IStore>) => s.player, [id]);\n\n  useEffect(() => {\n    if (tasksState.isFetching) {\n      return;\n    }\n    onFetchSubtitlesFromTasksStore(id);\n  }, [id, tasksState.isFetching]);\n\n  if (!id) {\n    return <Redirect to=\"/\"/>;\n  }\n\n  const videoId = get(currentTask, 'url');\n\n  const {video, player} = useYoutube(videoId, {\n    playerVars: {\n      controls: 1,\n      start: 1,\n      fs: 0,\n      rel: 0,\n      showinfo: 0,\n      // @ts-ignore\n      ecver: 0,\n      disablekb: 1,\n    },\n    events: {\n      onReady: ({target}) => {\n        console.log(\"player || \", target);\n        target.setVolume(10);\n        // console.log(\"READY\");\n      }\n    },\n  });\n\n  const tasksButton = tasksState.items.map((item) => {\n    return (\n      <li key={item.url}>\n        <Link to={`/play/${item.id}`}>{item.url}</Link>\n      </li>\n    );\n  });\n\n  console.log(\"Player render\");\n\n\n  return (\n    <div>\n      <Button onClick={() => player!.setVolume(70)} text=\"set vol\"/>\n      <Button onClick={() => player!.playVideo()} text=\"play\"/>\n      <Button onClick={() => player!.pauseVideo()} text=\"pause\"/>\n      <hr/>\n      {video}\n      <hr/>\n      <ul>\n        {tasksButton}\n      </ul>\n    </div>\n  )\n}\n\nexport default Player;\n","import React, { useEffect } from \"react\";\nimport { Actions, useActions } from \"easy-peasy\";\nimport { IStore } from \"../../store\";\n\nexport default function Home() {\n  const {\n    setIsOpenListModal,\n  } = useActions((a: Actions<IStore>) => ({\n    setIsOpenListModal: a.app.setIsOpenListModal,\n  }));\n\n  useEffect(() => {\n    setTimeout(() => {\n      setIsOpenListModal(true);\n    }, 400);\n  }, []);\n\n  return null\n}\n","import { useState } from 'react';\n\ninterface VoidFunction {\n  (): void;\n}\n\ninterface VoidFunctionCreator {\n  (): VoidFunction;\n}\n\nconst toggle = (state: boolean): boolean => !state;\n\nconst useForceUpdate: VoidFunctionCreator = (): VoidFunction => {\n  const [, setState] = useState<boolean>(true);\n  return (): void => {\n    setState(toggle);\n  };\n};\n\nexport default useForceUpdate;\n","// @ts-ignore\nimport { useContext, useEffect } from 'react';\n\n// @ts-ignore\nimport { __RouterContext, RouteComponentProps } from 'react-router';\nimport useForceUpdate from './useForceUpdate';\n\ninterface UseRouter {\n  <T = {}>(): RouteComponentProps<T>;\n}\n\ninterface VoidFunction {\n  (): void;\n}\n\n/**\n * Work only with react-router@4.4.0 +\n */\nconst useRouter: UseRouter = <T = {}>(): RouteComponentProps<T> => {\n  const forceUpdate: VoidFunction = useForceUpdate();\n  const routerContext: RouteComponentProps<T> = useContext(__RouterContext);\n  console.log(\"routerContext = \", routerContext);\n\n  if (!routerContext) {\n    throw new Error('use-react-router may only be used within a react-router context.');\n  }\n\n  useEffect(\n    (): VoidFunction =>\n      routerContext.history.listen(forceUpdate),\n    [routerContext]\n  );\n  return routerContext;\n};\n\nexport default useRouter;\n","import React, { useEffect } from \"react\";\nimport { Button, Classes, Dialog, HTMLTable } from \"@blueprintjs/core\";\nimport { useActions, useStore, State, Actions } from \"easy-peasy\";\nimport { IStore } from \"../../store\";\nimport styles from \"./Tasks.module.css\";\nimport useRouter from \"../../hooks/useReactRouter\";\n\ninterface TasksProps {\n}\n\nexport default function Tasks(props: TasksProps) {\n  const tasksState = useStore((s: State<IStore>) => s.tasks);\n  const isOpenListModal = useStore((s: State<IStore>) => s.app.isOpenListModal);\n  const {history} = useRouter();\n\n  const {\n    onFetch,\n    onDelete,\n    setIsOpenListModal,\n  } = useActions((a: Actions<IStore>) => ({\n    onFetch: a.tasks.fetch,\n    onDelete: a.tasks.delete,\n    setIsOpenListModal: a.app.setIsOpenListModal,\n  }));\n\n  useEffect(() => {\n    onFetch();\n  }, []);\n\n  function handleTableRowClick(id: number) {\n    history.push(`/play/${id}`);\n    console.log(\"handleTableRowClick\");\n  }\n\n  function handleDeleteRowClick(e: any, id: number) {\n    onDelete(id);\n    e.stopPropagation();\n  }\n\n  function renderTableList() {\n    return tasksState.items.map((item, i) => {\n      const img = `https://i.ytimg.com/vi/${item.url}/hqdefault.jpg`;\n      const link = `https://youtu.be/${item.url}`;\n\n      return (\n        <tr onClick={() => handleTableRowClick(item.id)} key={i}>\n          <td style={{width: 120, textAlign: 'center'}}>\n            <a href={link} target=\"_blank\">\n              <img className={styles.image} src={img} alt=\"\"/>\n            </a>\n          </td>\n          <td>\n            <h4># {item.id}</h4>\n          </td>\n          <td style={{width: 80, textAlign: 'center', verticalAlign: 'middle'}}>\n            <Button intent=\"danger\" icon=\"delete\" onClick={(e: any) => handleDeleteRowClick(e, item.id)}/>\n          </td>\n        </tr>\n      )\n    });\n  }\n\n  function renderTable() {\n    return (\n      <HTMLTable style={{width: '100%'}} interactive={true} bordered={true}>\n        <tbody>\n        {renderTableList()}\n        </tbody>\n      </HTMLTable>\n    );\n  }\n\n  function renderDialog() {\n    return (\n      <Dialog\n        style={{width: '70%'}}\n        icon=\"info-sign\"\n        title=\"List\"\n        isOpen={isOpenListModal}\n        onClose={() => setIsOpenListModal(false)}\n        usePortal={true}\n        className={Classes.OVERLAY_SCROLL_CONTAINER}\n      >\n        <div style={{overflow: 'scroll', height: '70vh'}}>\n          {renderTable()}\n        </div>\n      </Dialog>\n    );\n  }\n\n  return renderDialog();\n}\n\n\n","import { useCallback, useEffect, useRef } from 'react'\n\nexport default function useMultiKeyPressCallback(\n  targetKeys: string[],\n  callback: () => void,\n  preventDefault = true,\n) {\n  const pressedKeysRef = useRef(new Set<string>([]));\n  const params = useRef({\n    targetKeys: [] as string[],\n    callback: (() => undefined) as () => void,\n    preventDefault: true,\n  });\n\n  useEffect(\n    () => {\n      params.current = { targetKeys, callback, preventDefault }\n    },\n    [...targetKeys, callback, preventDefault],\n  );\n\n  const downHandler = useCallback((e: KeyboardEvent) => {\n    pressedKeysRef.current.add(e.key);\n    const hasPressedCombo = areKeysPressed(\n      params.current.targetKeys,\n      Array.from(pressedKeysRef.current),\n    );\n\n    if (hasPressedCombo && params.current.preventDefault) {\n      e.preventDefault();\n      params.current.callback()\n    }\n  }, []);\n\n  const upHandler = useCallback((e: KeyboardEvent) => {\n    pressedKeysRef.current.delete(e.key)\n  }, []);\n\n  useEffect(\n    () => {\n      window.addEventListener('keydown', downHandler);\n      window.addEventListener('keyup', upHandler);\n\n      return () => {\n        window.removeEventListener('keydown', downHandler);\n        window.removeEventListener('keyup', upHandler);\n      }\n    },\n    [downHandler, upHandler],\n  )\n}\n\nfunction areKeysPressed(keys: string[] = [], pressedKeys: string[] = []) {\n  if (keys.length !== pressedKeys.length) {\n    return false;\n  }\n\n  const keysToCheck = new Set(keys);\n  pressedKeys.forEach(key => {\n    keysToCheck.delete(key)\n  });\n\n  return keysToCheck.size === 0\n}\n","import React from \"react\";\nimport { Actions, useActions } from \"easy-peasy\";\nimport { IStore } from \"../../store\";\nimport Tasks from \"../Tasks/Tasks\";\nimport useMultiKeyPressCallback from \"../../hooks/useMultiKeyPressCallback\";\n\nexport default function Common() {\n  const {\n    toggleOpenListModal,\n  } = useActions((a: Actions<IStore>) => ({\n    toggleOpenListModal: a.app.toggleOpenListModal,\n  }));\n\n  useMultiKeyPressCallback(['Shift', 'J'], () => {\n    toggleOpenListModal();\n  });\n\n  return (\n    <Tasks/>\n  );\n}\n","import React, { Component } from 'react';\n// import { Router, Link, createHistory, LocationProvider } from \"@reach/router\"\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nimport { FocusStyleManager } from \"@blueprintjs/core\";\nimport { StoreProvider, createStore } from 'easy-peasy';\nimport plainStore, { IStore } from \"../../store\";\nimport Player from \"../Player/Player\";\n\nimport '../../../node_modules/@blueprintjs/core/lib/css/blueprint.css';\nimport './App.css';\nimport Home from '../Home/Home';\nimport Common from \"../Common/Common\";\n\nFocusStyleManager.onlyShowFocusOnTabs();\n\nconst store = createStore<IStore>(plainStore);\n\nclass App extends Component {\n  render() {\n    return (\n      <StoreProvider store={store}>\n        <Router basename={process.env.PUBLIC_URL}>\n          <div>\n            <Route exact path=\"/\" component={Home}/>\n            <Route path=\"/play/:id\" component={Player}/>\n            <Route exact path=\"/play\" component={Player}/>\n            <Common/>\n          </div>\n        </Router>\n      </StoreProvider>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"Tasks_image__3yXbi\"};"],"sourceRoot":""}