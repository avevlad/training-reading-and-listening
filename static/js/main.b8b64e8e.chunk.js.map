{"version":3,"sources":["store/tasks.store.ts","store/app.store.ts","utils/axios.ts","misc/default-task.js","utils/parse-youtube-url.ts","store/player.store.ts","store/index.ts","store/selectors.ts","hooks/useYoutube.tsx","utils/seconds-to-milliseconds.ts","hooks/use-multi-keypress.ts","components/Player/Player.tsx","components/Home/Home.tsx","hooks/useForceUpdate.ts","hooks/useReactRouter.ts","components/Tasks/Tasks.tsx","components/Common/Common.tsx","components/App/App.tsx","index.tsx","components/Player/Player.module.css","components/Tasks/Tasks.module.css"],"names":["TaskSource","store","isOpenListModal","setIsOpenListModal","state","payload","toggleOpenListModal","instance","axios","create","baseURL","process","default_task","link","subtitle","parseYoutubeUrl","url","res","match","String","items","isFetching","add","push","delete","index","findIndex","__","id","splice","deleteAll","setItems","setFetching","clear","thunk","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","actions","wrap","_context","prev","next","syncWithLocalstorage","stop","this","_x","apply","arguments","fetch","_ref2","_callee2","raw","tasks","defaultTasks","i","defaultTaskListElement","_plainSubtitles","t","_context2","localStorage","getItem","JSON","parse","abrupt","defaultTaskList","length","get","concat","sent","plainSubtitles","data","replace","source","YOUTUBE","_x2","setItem","stringify","listeners","listen","on","subtitles","setSubtitles","fetchSubtitlesFromTasksStore","helpers","task","sb","getState","Number","getTaskById","subtitleLib","_x3","src_store","app","player","select","_state$tasks$items$fi","filter","item","slicedToArray","YTScriptLoad","Promise","tag","document","createElement","src","firstScriptTag","getElementsByTagName","parentNode","insertBefore","window","onYouTubeIframeAPIReady","YT","BuildYTPlayer","options","videoId","events","playerVars","otherProps","objectWithoutProperties","resolve","reject","YTp","isExist","finishEvents","querySelector","objectSpread","onReady","console","warn","Player","idCounter","isEmpty","str","useYoutube","props","_useState","useState","_useState2","setPlayer","_useState3","_useState4","htmlId","useMemo","prefix","uniqueId","useRef","onStateChange","onPlaybackQualityChange","onPlaybackRateChange","onError","onApiChange","useEffect","current","video","react_default","opt","width","height","finalEvents","cueVideoById","_load","load","log","ytPlayer","target","secondsToMilliseconds","second","Math","floor","useMultiKeyPress","targetKeys","callback","mt","Mousetrap","body","bind","unbind","jj","params","onFetchSubtitlesFromTasksStore","useActions","isSubtitleDisabled","currentTime","_useState5","_useState6","sbCurrentIndex","setSbCurrentIndex","_useState7","_useState8","sbIsShow","currentTask","useStore","s","tasksState","playerState","react_router","to","_useYoutube","start","fs","rel","disablekb","modestbranding","setVolume","findCurrentSubtitleIndex","getCurrentTime","updateSubtitleCurrentIndex","time","videoElement","end","checkAndSeek","undefined","currentSb","nextSb","prevSb","seekTo","diff","firstSb","e","preventDefault","getPlayerState","pauseVideo","playVideo","range","map","num","key","x","getDuration","seekX","update","size","ct","newIndex","requestAnimationFrame","cancelAnimationFrame","location","search","text","style","padding","backgroundColor","lineHeight","fontSize","className","styles","root","debugButtons","buttons","onClick","removeItem","container","SubtitlesDebugItem","SubtitlesDebugTime","SubtitlesDebug","textList","join","split","SubtitlesDebugFullText","Home","setTimeout","toggle","useForceUpdate","setState","useRouter","forceUpdate","routerContext","useContext","__RouterContext","Error","history","Tasks","_useActions","onFetch","onDelete","renderTableList","img","textAlign","href","image","alt","verticalAlign","intent","icon","stopPropagation","handleDeleteRowClick","dialog","title","isOpen","onClose","usePortal","Classes","OVERLAY_SCROLL_CONTAINER","overflow","htmlTable","interactive","bordered","Common","onTaskClear","confirm","FocusStyleManager","onlyShowFocusOnTabs","createStore","plainStore","App","easy_peasy_esm","react_router_dom","basename","exact","path","component","Component","ReactDOM","render","components_App_App","getElementById","module","exports"],"mappings":"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","file":"static/js/main.b8b64e8e.chunk.js","sourcesContent":["import axios from '../utils/axios';\nimport { Action, listen, Listen, thunk, Thunk } from 'easy-peasy';\nimport defaultTaskList from \"../misc/default-task.js\";\nimport parseYoutubeUrl from \"../utils/parse-youtube-url\";\n\nexport enum TaskSource {\n  YOUTUBE = 'youtube',\n  AUDIO = 'audio',\n}\n\nexport interface Task {\n  id: number,\n  url: string,\n  source: TaskSource,\n  plainSubtitles: string,\n}\n\nexport interface ITasksState {\n  items: Task[],\n  isFetching: boolean,\n  listeners: Listen<ITasksActions>;\n}\n\ninterface ITasksActions {\n  add: Action<ITasksState, Task>,\n  delete: Action<ITasksState, number>,\n  deleteAll: Action<ITasksState>,\n  setItems: Action<ITasksState, Task[]>,\n  setFetching: Action<ITasksState, boolean>,\n  syncWithLocalstorage: Action<ITasksState>;\n  clear: Thunk<ITasksActions>;\n  fetch: Thunk<ITasksActions>;\n}\n\nexport type ITasksStore = ITasksState & ITasksActions;\n\nconst store: ITasksStore = {\n  items: [],\n  isFetching: true,\n  add: (state, payload) => {\n    state.items.push(payload)\n  },\n  delete: (state, payload) => {\n    let index = state.items.findIndex(__ => __.id === payload);\n    state.items.splice(index, 1)\n  },\n  deleteAll: (state) => {\n    state.items = [];\n  },\n  setItems: (state, payload) => {\n    state.items = payload;\n  },\n  setFetching: (state, payload) => {\n    state.isFetching = payload;\n  },\n  clear: thunk(async (actions) => {\n    actions.deleteAll(null);\n    actions.syncWithLocalstorage(null);\n  }),\n  fetch: thunk(async (actions) => {\n    actions.setFetching(true);\n    const raw = localStorage.getItem(\"app_items\");\n    if (raw) {\n      const tasks = JSON.parse(raw);\n      actions.setItems(tasks);\n      actions.setFetching(false);\n      return;\n    }\n\n    const defaultTasks = [];\n\n    for (let i = 0; i < defaultTaskList.length; i++) {\n      const defaultTaskListElement = defaultTaskList[i];\n      const res = await axios.get(`/${defaultTaskListElement.subtitle}`);\n      const plainSubtitles = res.data.replace(/(<([^>]+)>)/ig, '');\n\n      const t: Task = {\n        id: i,\n        plainSubtitles,\n        source: TaskSource.YOUTUBE,\n        url: parseYoutubeUrl(defaultTaskListElement.link),\n      };\n      defaultTasks.push(t);\n    }\n\n    actions.setItems(defaultTasks);\n    actions.syncWithLocalstorage(null);\n    actions.setFetching(false);\n  }),\n  syncWithLocalstorage: (state) => {\n    localStorage.setItem(\"app_items\", JSON.stringify(state.items));\n  },\n  listeners: listen(on => {\n    on(store.delete, (actions) => {\n      actions.syncWithLocalstorage(null);\n    });\n  })\n};\n\nexport default store;\n","import { Action } from \"easy-peasy\";\n\ninterface IAppState {\n  isOpenListModal: boolean,\n}\n\nexport interface IAppActions {\n  setIsOpenListModal: Action<IAppState, boolean>,\n  toggleOpenListModal: Action<IAppState, undefined>,\n}\n\nexport type IAppStore = IAppState & IAppActions;\n\nconst store: IAppStore = {\n  isOpenListModal: false,\n  setIsOpenListModal: (state, payload) => {\n    state.isOpenListModal = payload\n  },\n  toggleOpenListModal: (state) => {\n    state.isOpenListModal = !state.isOpenListModal\n  }\n};\n\nexport default store;\n","import axios from 'axios';\n\nconst instance = axios.create({\n  baseURL: process.env.PUBLIC_URL,\n});\n\nexport default instance;\n","export default [\n  {\n    link: \"https://www.youtube.com/watch?v=u00Kte9VIR0\",\n    subtitle: \"[DownSub.com] English Grammar_ Avoid 5 Common Mistakes with THERE IS _ THERE ARE.srt\",\n  },\n  {\n    link: \"https://www.youtube.com/watch?v=ptVqRCRPN9I\",\n    subtitle: \"[DownSub.com] Learn English with Movies and TV! _ 5 Powerful Tips from a Master Teacher _ Rachel’s English.srt\",\n  },\n  {\n    link: \"https://www.youtube.com/watch?v=XfAMirWVpjQ\",\n    subtitle: \"[DownSub.com] Do I speak slowly_ [How to understand native English speakers].srt\",\n  },\n  {\n    link: \"https://www.youtube.com/watch?v=TGmhnWaByXE\",\n    subtitle: \"[DownSub.com] Samsung Galaxy S10 Plus review_ the anti-iPhone.srt\",\n  },\n  {\n    link: \"https://www.youtube.com/watch?v=9hekJsCOHLU\",\n    subtitle: \"[DownSub.com] Differentiating Instruction_ A Guide for Teaching English-Language Learners.srt\",\n  },\n  {\n    link: \"https://www.youtube.com/watch?v=eX2PXjj-KDk\",\n    subtitle: \"Anders-Hejlsberg-Introducing-TypeScript_en.vtt\",\n  },\n  {\n    link: \"https://www.youtube.com/watch?v=gLglQ5-Q9FE\",\n    subtitle: \"[DownSub.com] Harry Potter and The Methods Of Rationality_ Chapter 1.srt\",\n  },\n  {\n    link: \"https://www.youtube.com/watch?v=tMPPGQCT8mE\",\n    subtitle: \"[DownSub.com] How to Bunnyhop a MTB - a tutorial.srt\",\n  },\n  {\n    link: \"https://www.youtube.com/watch?v=kkSBXBSOyoc\",\n    subtitle: \"[DownSub.com] 2 tricky vowel sounds in British and American English - AH and UH.srt\",\n  },\n  {\n    link: \"https://www.youtube.com/watch?v=o8NPllzkFhE\",\n    subtitle: \"[DownSub.com] The mind behind Linux _ Linus Torvalds.srt\",\n  },\n  {\n    link: \"https://youtu.be/quJdL9ggETI\",\n    subtitle: \"[DownSub.com] Margaret Gould Stewart_ How giant websites design for you (and a billion others, too).srt\",\n  },\n  {\n    link: \"https://youtu.be/H2QxFM9y0tY\",\n    subtitle: \"[DownSub.com] The disarming case to act right now on climate change _ Greta Thunberg.srt\",\n  },\n  {\n    link: \"https://youtu.be/pj8n78AuN3w\",\n    subtitle: \"[DownSub.com] YouTube's Rules Don't Apply to Everyone.srt\",\n  },\n  {\n    link: \"https://youtu.be/jAhjPd4uNFY\",\n    subtitle: \"[DownSub.com] Genetic Engineering Will Change Everything Forever – CRISPR.srt\",\n  },\n  {\n    link: \"https://youtu.be/DHg5j9cTb2k?t=32\",\n    subtitle: \"[DownSub.com] Genetic Engineering Will Change Everything Forever – CRISPR.srt\",\n  },\n  {\n    link: \"https://www.youtube.com/watch?time_continue=0&v=5VE9nihee7o\",\n    subtitle: \"[DownSub.com] Hillary Clinton_ The Vox Conversation.srt\",\n  },\n\n]\n","export default function parseYoutubeUrl(url: string): string {\n  const regexp = /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=|attribution_link\\?a=.+?watch.+?v(?:%|=)))((\\w|-){11})(?:\\S+)?$/;\n  const res = url.match(regexp);\n  return String(res![1]);\n}\n","import { Action, Select, select, thunk, Thunk } from 'easy-peasy';\n// @ts-ignore\nimport * as subtitleLib from 'subtitle';\nimport { IStore } from './index';\n\nexport interface ISubtitleItem {\n  start: number,\n  end: number,\n  text: string,\n  settings?: string,\n}\n\ninterface IPlayerState {\n  subtitles: ISubtitleItem[],\n  isFetching: boolean,\n}\n\ninterface IPlayerActions {\n  setSubtitles: Action<IPlayerState, ISubtitleItem[]>,\n  setFetching: Action<IPlayerState, boolean>,\n  fetchSubtitlesFromTasksStore: Thunk<IPlayerActions, string, any, IStore>;\n}\n\nexport type IPlayerStore = IPlayerState & IPlayerActions;\n\nconst store: IPlayerStore = {\n  subtitles: [],\n  isFetching: true,\n  setSubtitles: (state, payload) => {\n    state.subtitles = payload;\n  },\n  setFetching: (state, payload) => {\n    state.isFetching = payload;\n  },\n  fetchSubtitlesFromTasksStore: thunk(async (actions, payload, helpers) => {\n    const state = helpers.getState();\n    const id = Number(payload);\n    const task = state.getTaskById(id);\n\n    if (!task) {\n      return;\n    }\n\n    const sb = subtitleLib.parse(task.plainSubtitles);\n    actions.setSubtitles(sb);\n    actions.setFetching(false);\n  })\n};\n\nexport default store;\n","import { Select } from \"easy-peasy\";\n\nimport app, { IAppStore } from './app.store';\nimport tasks, { ITasksStore } from './tasks.store';\nimport player, { IPlayerStore } from './player.store';\nimport { getTaskById } from './selectors';\n\nexport interface IStore {\n  app: IAppStore,\n  tasks: ITasksStore,\n  player: IPlayerStore,\n  getTaskById: Select<IStore>,\n}\n\nexport default {\n  app,\n  tasks,\n  player,\n  // 👇 selectors\n  getTaskById,\n}\n","import { select } from 'easy-peasy';\nimport { IStore } from './index';\nimport { Task } from \"./tasks.store\";\n\nexport const getTaskById = select<IStore>(state => (id: number) => {\n  const [task] = state.tasks.items.filter((item: Task) => item.id === id);\n  return task;\n});\n","import React, { ReactNode, useState, useEffect, useMemo, useRef } from \"react\";\n\ndeclare global {\n  interface Window {\n    onYouTubeIframeAPIReady: any\n    YT: any\n  }\n}\n\ninterface BuildTYOptions {\n  id: string,\n  videoId: string,\n  events: any,\n  playerVars: any,\n}\n\nconst YTScriptLoad = new Promise(res => {\n  const tag = document.createElement('script');\n  tag.src = `https://www.youtube.com/iframe_api`;\n  const firstScriptTag = document.getElementsByTagName('script')[0];\n  firstScriptTag!.parentNode!.insertBefore(tag, firstScriptTag);\n  window.onYouTubeIframeAPIReady = () => res(window.YT);\n});\n\n\nconst BuildYTPlayer = (options: BuildTYOptions): any => {\n  const {id, videoId, events, playerVars, ...otherProps} = options;\n\n  return new Promise(async (resolve, reject) => {\n    const YTp: any = await YTScriptLoad;\n    const isExist = document.querySelector(`#${id}`) !== null;\n    const finishEvents = {\n      ...events,\n      onReady() {\n        resolve(player);\n      },\n    };\n\n    if (!isExist) {\n      console.warn(`YouTube hook: div #${id} not found.`);\n    }\n\n    const player = new YTp.Player(id, {\n      ...otherProps,\n      videoId,\n      playerVars: playerVars,\n      events: finishEvents,\n    });\n\n    return player;\n  })\n};\n\nlet idCounter = 0;\n\nfunction isEmpty(str: string): boolean {\n  return (!str || 0 === str.length);\n}\n\nfunction uniqueId(prefix: string) {\n  let id = ++idCounter;\n  return String(prefix) + id;\n}\n\nexport interface YoutubeHookProps {\n  width?: string | number;\n  height?: string | number;\n  playerVars?: YT.PlayerVars,\n  events?: YT.Events,\n}\n\n\nexport interface YoutubeHookResult {\n  video: ReactNode,\n  player: YT.Player | null,\n  state: YT.PlayerState,\n}\n\ntype CallbackFunction = () => void;\n\nfunction useYoutube(videoId: string, props?: YoutubeHookProps): YoutubeHookResult {\n  const [player, setPlayer] = useState<YT.Player | null>(null);\n  const [state, setState] = useState<YT.PlayerState>(-1);\n  const htmlId = useMemo(() => uniqueId('unq-yt-id-'), []);\n  // events\n  const onReady = useRef<CallbackFunction | any>(null);\n  const onStateChange = useRef<CallbackFunction | any>(null);\n  const onPlaybackQualityChange = useRef<CallbackFunction | any>(null);\n  const onPlaybackRateChange = useRef<CallbackFunction | any>(null);\n  const onError = useRef<CallbackFunction | any>(null);\n  const onApiChange = useRef<CallbackFunction | any>(null);\n\n  // Remember the latest callback.\n  useEffect(() => {\n    if (!props) {\n      return;\n    }\n\n    onReady.current = (props.events && props.events.onReady);\n    onStateChange.current = (props.events && props.events.onStateChange);\n    onPlaybackQualityChange.current = (props.events && props.events.onPlaybackQualityChange);\n    onPlaybackRateChange.current = (props.events && props.events.onPlaybackRateChange);\n    onError.current = (props.events && props.events.onError);\n    onApiChange.current = (props.events && props.events.onApiChange);\n  });\n\n  const video = !isEmpty(videoId) && <div id={htmlId}/>;\n\n  useEffect(() => {\n    if (isEmpty(videoId)) {\n      return;\n    }\n\n    const playerVars = (props && props.playerVars) || {};\n    // const events = (props && props.events) || {};\n\n    const opt = {\n      width: props!.width,\n      height: props!.height,\n      id: htmlId,\n      videoId,\n      playerVars,\n    };\n\n    const finalEvents: YT.Events = {\n      onReady: (__) => onReady.current && onReady.current(__),\n      onStateChange: (__) => onStateChange.current && onStateChange.current(__),\n      onPlaybackQualityChange: (__) => onPlaybackQualityChange.current && onPlaybackQualityChange.current(__),\n      onPlaybackRateChange: (__) => onPlaybackRateChange.current && onPlaybackRateChange.current(__),\n      onError: (__) => onError.current && onError.current(__),\n      onApiChange: (__) => onApiChange.current && onApiChange.current(__),\n    };\n\n    async function load() {\n      const ytPlayer = await BuildYTPlayer({\n        ...opt,\n        events: finalEvents,\n      });\n      onReady.current && onReady.current({target: ytPlayer});\n      return setPlayer(ytPlayer);\n    }\n\n    if (!player) {\n      load();\n    } else {\n      player.cueVideoById(videoId);\n    }\n\n    return () => {\n      console.log(\"return\");\n    };\n\n  }, [videoId]);\n\n  return {video, player, state};\n}\n\n\nexport default useYoutube;\n","export default function secondsToMilliseconds(second: number): number {\n  return Math.floor(second * 1000);\n}\n","import Mousetrap from \"mousetrap\";\nimport { useEffect } from \"react\";\n\n/**\n * https://codesandbox.io/s/y3qzyr3lrz\n * @param targetKeys\n * @param callback\n */\nexport default function useMultiKeyPress(\n  targetKeys: string[],\n  callback: (e: ExtendedKeyboardEvent, combo: string) => any,\n) {\n  useEffect(() => {\n    const mt = new Mousetrap(document.body);\n\n    mt.bind(targetKeys, callback);\n\n    return () => {\n      mt.unbind(targetKeys);\n    };\n  }, [targetKeys]);\n}\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Actions, State, useActions, useStore } from \"easy-peasy\";\nimport { IStore } from \"../../store\";\nimport useYoutube from \"../../hooks/useYoutube\";\nimport { Redirect } from \"react-router\";\nimport { get, range } from 'lodash';\nimport { Button } from '@blueprintjs/core';\n// import useMultiKeyPressCallback from \"../../hooks/useMultiKeyPressCallback\";\n\nimport styles from './Player.module.css';\nimport useInterval from '../../hooks/useInterval';\nimport { func } from \"prop-types\";\nimport secondsToMilliseconds from '../../utils/seconds-to-milliseconds';\nimport useMultiKeyPress from \"../../hooks/use-multi-keypress\";\n\ninterface PlayerProps {\n  [key: string]: any;\n}\n\nconst jj = JSON.stringify;\n\ntype CallbackFunction = () => void;\n\n\nfunction Player(props: PlayerProps) {\n  const id = props.match.params.id;\n  const {\n    onFetchSubtitlesFromTasksStore,\n  } = useActions((a: Actions<IStore>) => ({\n    onFetchSubtitlesFromTasksStore: a.player.fetchSubtitlesFromTasksStore,\n  }));\n\n  const timeoutRef = useRef(0);\n  const [isSubtitleDisabled, setIsSubtitleDisabled] = useState(true);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [sbCurrentIndex, setSbCurrentIndex] = useState(0);\n  const [sbIsShow, setSbIsShow] = useState(false);\n  const currentTask = useStore((s: State<IStore>) => s.getTaskById(Number(id)), [id]);\n  const tasksState = useStore((s: State<IStore>) => s.tasks, [id]);\n  const playerState = useStore((s: State<IStore>) => s.player, [id]);\n\n  useEffect(() => {\n    if (tasksState.isFetching) {\n      return;\n    }\n    onFetchSubtitlesFromTasksStore(id);\n  }, [id, tasksState.isFetching]);\n\n\n  if (!id) {\n    return <Redirect to=\"/\"/>;\n  }\n\n  const videoId = get(currentTask, 'url');\n\n  const {video, player} = useYoutube(videoId, {\n    width: 600,\n    height: 200,\n    playerVars: {\n      // controls: 0,\n      start: 1,\n      fs: 0,\n      rel: 0,\n      disablekb: 1,\n      modestbranding: 3,\n    },\n    events: {\n      onReady: ({target}) => {\n        target.setVolume(100);\n      },\n      onStateChange: () => {\n        updateSubtitleCurrentIndex();\n      }\n    },\n  });\n\n  // Space key\n  useMultiKeyPress(['space'], (e) => {\n    if (e.preventDefault) {\n      e.preventDefault();\n    }\n\n    if (!player) return;\n    if (player.getPlayerState() === 1) {\n      player.pauseVideo();\n    } else {\n      player.playVideo();\n    }\n  });\n\n  useMultiKeyPress(['left'], () => {\n    if (!player) return;\n    checkAndSeek(false);\n  });\n  useMultiKeyPress(['right'], () => {\n    if (!player) return;\n    checkAndSeek(true);\n  });\n\n  const numKeys = range(0, 10).map((__) => String(__));\n  useMultiKeyPress(numKeys, handleNumberKey);\n\n  useEffect(() => {\n    if (!player) return;\n\n    let x: number;\n    console.log(\"Run update = \", secondsToMilliseconds(player.getCurrentTime()));\n\n    function update() {\n      if (!player) return;\n\n      const sb = playerState.subtitles;\n      const size = sb.length;\n      const currentSb = sb[sbCurrentIndex];\n      const ct = secondsToMilliseconds(player.getCurrentTime());\n      const fixCt = ct + 50;\n\n      // console.log(\"ct = \", ct);\n      // console.log(\"currentSb = \", currentSb);\n      // console.log(\"sbCurrentIndex = \", sbCurrentIndex);\n      // console.log(\"secondsToMilliseconds.........\");\n\n\n      if ((size - 1) <= sbCurrentIndex) {\n        return;\n      }\n\n      if (fixCt > currentSb.end) {\n        const newIndex = sbCurrentIndex + 1;\n        console.log(\"set new index\", newIndex);\n        setSbCurrentIndex(newIndex);\n        return;\n      }\n\n      x = requestAnimationFrame(update);\n    }\n\n    update();\n\n    return () => {\n      if (!x) return;\n\n      cancelAnimationFrame(x);\n    }\n  }, [player, sbCurrentIndex]);\n\n  function findCurrentSubtitleIndex(time: number): number {\n    for (let i = 0; i < playerState.subtitles.length; i++) {\n      const videoElement = playerState.subtitles[i];\n      if (time >= videoElement.start && time <= videoElement.end) {\n        console.log(\"time.start = \", videoElement.start);\n        console.log(\"time.end = \", videoElement.end);\n        return i;\n      }\n    }\n\n    return 0;\n  }\n\n  function updateSubtitleCurrentIndex() {\n    if (!player) return;\n\n    const ct = secondsToMilliseconds(player.getCurrentTime());\n\n    const i = findCurrentSubtitleIndex(ct);\n    setSbCurrentIndex(i);\n  }\n\n  function checkAndSeek(next: boolean) {\n    if (!player) return;\n    const plainCurrentTime = player.getCurrentTime();\n    const currentTime = secondsToMilliseconds(plainCurrentTime);\n    const index = findCurrentSubtitleIndex(currentTime);\n\n    if (index === undefined) {\n      const firstSb = playerState.subtitles[0];\n      player.seekTo((firstSb.start) / 1000, true);\n      return;\n    }\n\n    const currentSb = playerState.subtitles[index];\n    const nextSb = playerState.subtitles[index + 1];\n    const prevSb = playerState.subtitles[index - 1];\n\n    if (next) {\n      if (!nextSb) return;\n      console.log(\"Next\", nextSb);\n      player.seekTo((nextSb.start - 200) / 1000, true);\n    } else {\n      const diff = currentTime - currentSb.start;\n      if (diff < 800 && prevSb) {\n        console.log(\"Prev\", index - 1, prevSb);\n        player.seekTo(((prevSb.start - 200) / 1000), true);\n      }\n      if (diff > 800) {\n        console.log(\"Current\", currentSb);\n        player.seekTo(((currentSb.start - 200) / 1000), true);\n      }\n    }\n  }\n\n  function handleNumberKey(e: KeyboardEvent) {\n    const num = Number(e.key);\n    if (!player) return;\n\n    const x = (player.getDuration() / 10) * num;\n    const seekX = num === 0 ? 0 : x;\n\n    player.seekTo(seekX, true);\n  }\n\n  function SubtitlesDebug() {\n    if (isSubtitleDisabled) {\n      return null;\n    }\n    const current = playerState.subtitles[sbCurrentIndex];\n    const next = playerState.subtitles[sbCurrentIndex + 1];\n\n    function item(__: any) {\n      return (\n        <div className={styles.SubtitlesDebugItem}>\n          <div className={styles.SubtitlesDebugTime}>\n            <div>\n              start: {jj(get(__, 'start'))}\n            </div>\n            <div>\n              end: {jj(get(__, 'end'))}\n            </div>\n            <div>\n              show?: {jj(sbIsShow)}\n            </div>\n          </div>\n          <pre>{jj(get(__, 'text'))}</pre>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.SubtitlesDebug}>\n        <h3>Current: {sbCurrentIndex}, time: {currentTime}</h3>\n        {item(current)}\n        <h3>Next:</h3>\n        {item(next)}\n      </div>\n    )\n  }\n\n  function SubtitlesDebugFullText() {\n    if (!isSubtitleDisabled) {\n      return null;\n    }\n\n    const subtitles = playerState.subtitles;\n    const plainText = subtitles.map((item) => item.text).join(' ');\n    const textList = plainText.split('.');\n\n\n    return (\n      <div className={styles.SubtitlesDebugFullText}>\n        {textList.map((item, i) => {\n          return <p key={i}>{item}.</p>;\n        })}\n      </div>\n    )\n  }\n\n  if (props.location.search) {\n    const items = playerState.subtitles.map((item, i) => {\n      return (\n        <div key={i}>\n          {item.text}\n        </div>\n      )\n    });\n    return (\n      <div style={{padding: '40px 40px', backgroundColor: '#fff', lineHeight: '25px', fontSize: 15}}>\n        {items}\n      </div>\n    )\n  }\n\n  return (\n    <div className={styles.root}>\n      <div>\n        {video}\n      </div>\n      <div className={styles.debugButtons}>\n        <Button onClick={() => player!.playVideo()} text=\"play\"/>\n        <Button onClick={() => player!.pauseVideo()} text=\"pause\"/>\n        <Button onClick={() => player!.setVolume(10)} text=\"set vol\"/>\n        <Button onClick={() => player!.seekTo(50, true)} text=\"go to 50s\"/>\n        <Button onClick={() => localStorage.removeItem('app_items')} text=\"Clear LS\"/>\n        {/*<Button href text=\"go to 50s\"/>*/}\n      </div>\n      <div className={styles.container}>\n        <div>\n        </div>\n        <SubtitlesDebug/>\n        <SubtitlesDebugFullText/>\n      </div>\n    </div>\n  )\n}\n\n\nexport default Player;\n","import React, { useEffect } from \"react\";\nimport { Actions, useActions } from \"easy-peasy\";\nimport { IStore } from \"../../store\";\n\nexport default function Home() {\n  const {\n    setIsOpenListModal,\n  } = useActions((a: Actions<IStore>) => ({\n    setIsOpenListModal: a.app.setIsOpenListModal,\n  }));\n\n  useEffect(() => {\n    setTimeout(() => {\n      setIsOpenListModal(true);\n    }, 400);\n  }, []);\n\n  return null\n}\n","import { useState } from 'react';\n\ninterface VoidFunction {\n  (): void;\n}\n\ninterface VoidFunctionCreator {\n  (): VoidFunction;\n}\n\nconst toggle = (state: boolean): boolean => !state;\n\nconst useForceUpdate: VoidFunctionCreator = (): VoidFunction => {\n  const [, setState] = useState<boolean>(true);\n  return (): void => {\n    setState(toggle);\n  };\n};\n\nexport default useForceUpdate;\n","// @ts-ignore\nimport { useContext, useEffect } from 'react';\n\n// @ts-ignore\nimport { __RouterContext, RouteComponentProps } from 'react-router';\nimport useForceUpdate from './useForceUpdate';\n\ninterface UseRouter {\n  <T = {}>(): RouteComponentProps<T>;\n}\n\ninterface VoidFunction {\n  (): void;\n}\n\n/**\n * Work only with react-router@4.4.0 +\n */\nconst useRouter: UseRouter = <T = {}>(): RouteComponentProps<T> => {\n  const forceUpdate: VoidFunction = useForceUpdate();\n  const routerContext: RouteComponentProps<T> = useContext(__RouterContext);\n\n  if (!routerContext) {\n    throw new Error('use-react-router may only be used within a react-router context.');\n  }\n\n  useEffect(\n    (): VoidFunction =>\n      routerContext.history.listen(forceUpdate),\n    [routerContext]\n  );\n  return routerContext;\n};\n\nexport default useRouter;\n","import React, { useEffect } from \"react\";\nimport { Button, Classes, Dialog, HTMLTable } from \"@blueprintjs/core\";\nimport { useActions, useStore, State, Actions } from \"easy-peasy\";\nimport { IStore } from \"../../store\";\nimport styles from \"./Tasks.module.css\";\nimport useRouter from \"../../hooks/useReactRouter\";\n\ninterface TasksProps {\n}\n\nexport default function Tasks(props: TasksProps) {\n  const tasksState = useStore((s: State<IStore>) => s.tasks);\n  const isOpenListModal = useStore((s: State<IStore>) => s.app.isOpenListModal);\n  const {history} = useRouter();\n\n  const {\n    onFetch,\n    onDelete,\n    setIsOpenListModal,\n  } = useActions((a: Actions<IStore>) => ({\n    onFetch: a.tasks.fetch,\n    onDelete: a.tasks.delete,\n    setIsOpenListModal: a.app.setIsOpenListModal,\n  }));\n\n  useEffect(() => {\n    onFetch();\n  }, []);\n\n  function handleTableRowClick(id: number) {\n    history.push(`/play/${id}`);\n    console.log(\"handleTableRowClick\");\n  }\n\n  function handleDeleteRowClick(e: any, id: number) {\n    onDelete(id);\n    e.stopPropagation();\n  }\n\n  function renderTableList() {\n    return tasksState.items.map((item, i) => {\n      const img = `https://i.ytimg.com/vi/${item.url}/hqdefault.jpg`;\n      const link = `https://youtu.be/${item.url}`;\n\n      return (\n        <tr onClick={() => handleTableRowClick(item.id)} key={i}>\n          <td style={{width: 120, textAlign: 'center'}}>\n            <a href={link} target=\"_blank\">\n              <img className={styles.image} src={img} alt=\"\"/>\n            </a>\n          </td>\n          <td>\n            <h4># {item.id}</h4>\n          </td>\n          <td style={{width: 80, textAlign: 'center', verticalAlign: 'middle'}}>\n            <Button intent=\"danger\" icon=\"delete\" onClick={(e: any) => handleDeleteRowClick(e, item.id)}/>\n          </td>\n        </tr>\n      )\n    });\n  }\n\n  function renderTable() {\n    return (\n      <HTMLTable style={{width: '100%'}} interactive={true} bordered={true}>\n        <tbody>\n        {renderTableList()}\n        </tbody>\n      </HTMLTable>\n    );\n  }\n\n  function renderDialog() {\n    return (\n      <Dialog\n        style={{width: '70%'}}\n        icon=\"info-sign\"\n        title=\"List\"\n        isOpen={isOpenListModal}\n        onClose={() => setIsOpenListModal(false)}\n        usePortal={true}\n        className={Classes.OVERLAY_SCROLL_CONTAINER}\n      >\n        <div style={{overflow: 'scroll', height: '70vh'}}>\n          {renderTable()}\n        </div>\n      </Dialog>\n    );\n  }\n\n  return renderDialog();\n}\n\n\n","import React from \"react\";\nimport { Actions, useActions } from \"easy-peasy\";\nimport { IStore } from \"../../store\";\nimport Tasks from \"../Tasks/Tasks\";\nimport useMultiKeyPress from \"../../hooks/use-multi-keypress\";\n\nexport default function Common() {\n  const {\n    onTaskClear,\n    toggleOpenListModal,\n  } = useActions((a: Actions<IStore>) => ({\n    toggleOpenListModal: a.app.toggleOpenListModal,\n    onTaskClear: a.tasks.deleteAll,\n  }));\n\n  useMultiKeyPress(['shift+j', 'ctrl+k'], () => {\n    toggleOpenListModal();\n  });\n\n  useMultiKeyPress(['shift+r'], () => {\n    const x = confirm(\"Clear LocalStorage?\");\n    if (x) {\n      onTaskClear(undefined);\n    }\n  });\n\n  return (\n    <div>\n      <Tasks/>\n    </div>\n  );\n}\n","import React, { Component } from 'react';\n// import { Router, Link, createHistory, LocationProvider } from \"@reach/router\"\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nimport { FocusStyleManager } from \"@blueprintjs/core\";\nimport { StoreProvider, createStore } from 'easy-peasy';\nimport plainStore, { IStore } from \"../../store\";\nimport Player from \"../Player/Player\";\n\nimport '../../../node_modules/@blueprintjs/core/lib/css/blueprint.css';\nimport './App.css';\nimport Home from '../Home/Home';\nimport Common from \"../Common/Common\";\n\nFocusStyleManager.onlyShowFocusOnTabs();\n\nconst store = createStore<IStore>(plainStore);\n\nclass App extends Component {\n  render() {\n    return (\n      <StoreProvider store={store}>\n        <Router basename={process.env.PUBLIC_URL}>\n          <div>\n            <Common/>\n            <Route exact path=\"/\" component={Home}/>\n            <Route path=\"/play/:id\" component={Player}/>\n            <Route exact path=\"/play\" component={Player}/>\n          </div>\n        </Router>\n      </StoreProvider>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Player_root__3rqwu\",\"container\":\"Player_container__1Yacn\",\"debugButtons\":\"Player_debugButtons__21nZT\",\"SubtitlesDebug\":\"Player_SubtitlesDebug__t0saq\",\"SubtitlesDebugFullText\":\"Player_SubtitlesDebugFullText__cRonI\",\"SubtitlesDebugItem\":\"Player_SubtitlesDebugItem__2BZE7\",\"SubtitlesDebugTime\":\"Player_SubtitlesDebugTime__3Ftel\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"Tasks_image__3yXbi\"};"],"sourceRoot":""}