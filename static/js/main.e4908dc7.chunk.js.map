{"version":3,"sources":["store/tasks.store.ts","store/app.store.ts","utils/axios.ts","misc/default-task.js","utils/parse-youtube-url.ts","store/player.store.ts","store/index.ts","store/selectors.ts","hooks/useYoutube.tsx","hooks/useMultiKeyPressCallback.ts","components/Player/Player.tsx","utils/seconds-to-milliseconds.ts","hooks/useInterval.tsx","components/Home/Home.tsx","hooks/useForceUpdate.ts","hooks/useReactRouter.ts","components/Tasks/Tasks.tsx","components/Common/Common.tsx","components/App/App.tsx","index.tsx","components/Player/Player.module.css","components/Tasks/Tasks.module.css"],"names":["TaskSource","store","isOpenListModal","setIsOpenListModal","state","payload","toggleOpenListModal","instance","axios","create","baseURL","process","default_task","link","subtitle","parseYoutubeUrl","url","res","match","String","items","isFetching","add","push","delete","index","findIndex","__","id","splice","deleteAll","setItems","setFetching","clear","thunk","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","actions","wrap","_context","prev","next","syncWithLocalstorage","stop","this","_x","apply","arguments","fetch","_ref2","_callee2","raw","tasks","defaultTasks","i","defaultTaskListElement","t","_context2","localStorage","getItem","JSON","parse","abrupt","defaultTaskList","length","get","concat","sent","plainSubtitles","data","source","YOUTUBE","_x2","setItem","stringify","listeners","listen","on","subtitles","setSubtitles","fetchSubtitlesFromTasksStore","helpers","task","sb","getState","Number","getTaskById","subtitleLib","_x3","src_store","app","player","select","_state$tasks$items$fi","filter","item","slicedToArray","YTScriptLoad","Promise","tag","document","createElement","src","firstScriptTag","getElementsByTagName","parentNode","insertBefore","window","onYouTubeIframeAPIReady","YT","BuildYTPlayer","options","videoId","events","playerVars","otherProps","objectWithoutProperties","resolve","reject","YTp","isExist","finishEvents","querySelector","objectSpread","onReady","console","warn","Player","idCounter","isEmpty","str","useYoutube","props","_useState","useState","_useState2","setPlayer","_useState3","_useState4","htmlId","useMemo","prefix","uniqueId","useRef","onStateChange","onPlaybackQualityChange","onPlaybackRateChange","onError","onApiChange","useEffect","current","video","react_default","opt","width","height","finalEvents","cueVideoById","_load","load","log","ytPlayer","useMultiKeyPressCallback","targetKeys","callback","preventDefault","undefined","pressedKeysRef","Set","params","toConsumableArray","downHandler","useCallback","e","key","keys","pressedKeys","keysToCheck","forEach","size","areKeysPressed","Array","from","upHandler","addEventListener","removeEventListener","jj","onFetchSubtitlesFromTasksStore","useActions","currentTime","setCurrentTime","_useState5","_useState6","sbCurrentIndex","_useState7","_useState8","sbIsShow","currentTask","useStore","s","tasksState","playerState","react_router","to","_useYoutube","start","fs","rel","disablekb","modestbranding","checkAndSeek","plainCurrentTime","getCurrentTime","second","arr","toString","split","_arr","sec","fixedNext","substr","final","secondsToMilliseconds","time","videoElement","end","findCurrentSubtitleIndex","currentSb","nextSb","prevSb","seekTo","diff","firstSb","handleNumberKey","k","num","x","getDuration","seekX","getPlayerState","pauseVideo","playVideo","delay","savedCallback","setInterval","clearInterval","useInterval","style","buttons","onClick","text","setVolume","className","styles","container","SubtitlesDebugItem","SubtitlesDebugTime","SubtitlesDebug","Home","setTimeout","toggle","useForceUpdate","setState","useRouter","forceUpdate","routerContext","useContext","__RouterContext","Error","history","Tasks","_useActions","onFetch","onDelete","renderTableList","map","img","textAlign","href","target","image","alt","verticalAlign","intent","icon","stopPropagation","handleDeleteRowClick","dialog","title","isOpen","onClose","usePortal","Classes","OVERLAY_SCROLL_CONTAINER","overflow","htmlTable","interactive","bordered","Common","onTaskClear","confirm","FocusStyleManager","onlyShowFocusOnTabs","createStore","plainStore","App","easy_peasy_esm","react_router_dom","basename","exact","path","component","Component","ReactDOM","render","components_App_App","getElementById","module","exports"],"mappings":"2HAKYA,2GCkBGC,EAVU,CACvBC,iBAAiB,EACjBC,mBAAoB,SAACC,EAAOC,GAC1BD,EAAMF,gBAAkBG,GAE1BC,oBAAqB,SAACF,GACpBA,EAAMF,iBAAmBE,EAAMF,kDCbpBK,SAJEC,EAAMC,OAAO,CAC5BC,QAASC,oCCHIC,EAAA,CACb,CACEC,KAAM,8CACNC,SAAU,oFAEZ,CACED,KAAM,8CACNC,SAAU,oEAEZ,CACED,KAAM,+BACNC,SAAU,2GAEZ,CACED,KAAM,+BACNC,SAAU,4FAEZ,CACED,KAAM,+BACNC,SAAU,6DAEZ,CACED,KAAM,+BACNC,SAAU,sFAEZ,CACED,KAAM,oCACNC,SAAU,sFAEZ,CACED,KAAM,8DACNC,SAAU,4DC/BC,SAASC,EAAgBC,GACtC,IACMC,EAAMD,EAAIE,MADD,gKAEf,OAAOC,OAAOF,EAAK,cJETjB,mDA+BZ,IAAMC,EAAqB,CACzBmB,MAAO,GACPC,YAAY,EACZC,IAAK,SAAClB,EAAOC,GACXD,EAAMgB,MAAMG,KAAKlB,IAEnBmB,OAAQ,SAACpB,EAAOC,GACd,IAAIoB,EAAQrB,EAAMgB,MAAMM,UAAU,SAAAC,GAAE,OAAIA,EAAGC,KAAOvB,IAClDD,EAAMgB,MAAMS,OAAOJ,EAAO,IAE5BK,UAAW,SAAC1B,GACVA,EAAMgB,MAAQ,IAEhBW,SAAU,SAAC3B,EAAOC,GAChBD,EAAMgB,MAAQf,GAEhB2B,YAAa,SAAC5B,EAAOC,GACnBD,EAAMiB,WAAahB,GAErB4B,MAAOC,YAAK,eAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAC,SAAAC,EAAOC,GAAP,OAAAJ,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACXJ,EAAQZ,UAAU,MAClBY,EAAQK,qBAAqB,MAFlB,wBAAAH,EAAAI,SAAAP,EAAAQ,SAAD,gBAAAC,GAAA,OAAAf,EAAAgB,MAAAF,KAAAG,YAAA,IAIZC,MAAOnB,YAAK,eAAAoB,EAAAlB,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAC,SAAAe,EAAOb,GAAP,IAAAc,EAAAC,EAAAC,EAAAC,EAAAC,EAAA3C,EAAA4C,EAAA,OAAAvB,EAAAC,EAAAI,KAAA,SAAAmB,GAAA,cAAAA,EAAAjB,KAAAiB,EAAAhB,MAAA,UACXJ,EAAQV,aAAY,KACdwB,EAAMO,aAAaC,QAAQ,cAFtB,CAAAF,EAAAhB,KAAA,eAIHW,EAAQQ,KAAKC,MAAMV,GACzBd,EAAQX,SAAS0B,GACjBf,EAAQV,aAAY,GANX8B,EAAAK,OAAA,iBAULT,EAAe,GAEZC,EAAI,EAZF,YAYKA,EAAIS,EAAgBC,QAZzB,CAAAP,EAAAhB,KAAA,gBAaHc,EAAyBQ,EAAgBT,GAbtCG,EAAAhB,KAAA,GAcStC,EAAM8D,IAAN,IAAAC,OAAcX,EAAuB9C,WAd9C,QAcHG,EAdG6C,EAAAU,KAeHX,EAAU,CACdjC,GAAI+B,EACJc,eAAgBxD,EAAIyD,KACpBC,OAAQ3E,EAAW4E,QACnB5D,IAAKD,EAAgB6C,EAAuB/C,OAE9C6C,EAAanC,KAAKsC,GArBT,QAYiCF,IAZjCG,EAAAhB,KAAA,gBAwBXJ,EAAQX,SAAS2B,GACjBhB,EAAQK,qBAAqB,MAC7BL,EAAQV,aAAY,GA1BT,yBAAA8B,EAAAd,SAAAO,EAAAN,SAAD,gBAAA4B,GAAA,OAAAvB,EAAAH,MAAAF,KAAAG,YAAA,IA4BZL,qBAAsB,SAAC3C,GACrB2D,aAAae,QAAQ,YAAab,KAAKc,UAAU3E,EAAMgB,SAEzD4D,UAAWC,YAAO,SAAAC,GAChBA,EAAGjF,EAAMuB,OAAQ,SAACkB,GAChBA,EAAQK,qBAAqB,WAKpB9C,YKhDAA,EAxBa,CAC1BkF,UAAW,GACX9D,YAAY,EACZ+D,aAAc,SAAChF,EAAOC,GACpBD,EAAM+E,UAAY9E,GAEpB2B,YAAa,SAAC5B,EAAOC,GACnBD,EAAMiB,WAAahB,GAErBgF,6BAA8BnD,YAAK,eAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAC,SAAAC,EAAOC,EAASrC,EAASiF,GAAzB,IAAAlF,EAAAwB,EAAA2D,EAAAC,EAAA,OAAAlD,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAC5B1C,EAAQkF,EAAQG,WAChB7D,EAAK8D,OAAOrF,GACZkF,EAAOnF,EAAMuF,YAAY/D,GAHG,CAAAgB,EAAAE,KAAA,eAAAF,EAAAuB,OAAA,iBAS5BqB,EAAKI,QAAkBL,EAAKd,gBAClC/B,EAAQ0C,aAAaI,GACrB9C,EAAQV,aAAY,GAXc,wBAAAY,EAAAI,SAAAP,EAAAQ,SAAD,gBAAAC,EAAA2B,EAAAgB,GAAA,OAAA1D,EAAAgB,MAAAF,KAAAG,YAAA,YCpBtB0C,EAAA,CACbC,MACAtC,QACAuC,SAEAL,YCfyBM,YAAe,SAAA7F,GAAK,OAAI,SAACwB,GAAe,IAAAsE,EAClD9F,EAAMqD,MAAMrC,MAAM+E,OAAO,SAACC,GAAD,OAAgBA,EAAKxE,KAAOA,IACpE,OAFiEQ,OAAAiE,EAAA,EAAAjE,CAAA8D,EAAA,0BCY7DI,EAAe,IAAIC,QAAQ,SAAAtF,GAC/B,IAAMuF,EAAMC,SAASC,cAAc,UACnCF,EAAIG,IAAJ,qCACA,IAAMC,EAAiBH,SAASI,qBAAqB,UAAU,GAC/DD,EAAgBE,WAAYC,aAAaP,EAAKI,GAC9CI,OAAOC,wBAA0B,kBAAMhG,EAAI+F,OAAOE,OAI9CC,EAAgB,SAACC,GAAiC,IAC/CxF,EAAkDwF,EAAlDxF,GAAIyF,EAA8CD,EAA9CC,QAASC,EAAqCF,EAArCE,OAAQC,EAA6BH,EAA7BG,WAAeC,EADWpF,OAAAqF,EAAA,EAAArF,CACGgF,EADH,wCAGtD,OAAO,IAAIb,QAAJ,eAAApE,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAY,SAAAC,EAAOiF,EAASC,GAAhB,IAAAC,EAAAC,EAAAC,EAAA9B,EAAA,OAAA1D,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACMwD,EADN,cACXsB,EADWhF,EAAA4B,KAEXqD,EAA+C,OAArCpB,SAASsB,cAAT,IAAAxD,OAA2B3C,IACrCkG,EAHW1F,OAAA4F,EAAA,EAAA5F,CAAA,GAIZkF,EAJY,CAKfW,QALe,WAMbP,EAAQ1B,MAIP6B,GACHK,QAAQC,KAAR,sBAAA5D,OAAmC3C,EAAnC,gBAGIoE,EAAS,IAAI4B,EAAIQ,OAAOxG,EAAfQ,OAAA4F,EAAA,EAAA5F,CAAA,GACVoF,EADU,CAEbH,UACAE,WAAYA,EACZD,OAAQQ,KAlBOlF,EAAAuB,OAAA,SAqBV6B,GArBU,wBAAApD,EAAAI,SAAAP,EAAAQ,SAAZ,gBAAAC,EAAA2B,GAAA,OAAA1C,EAAAgB,MAAAF,KAAAG,YAAA,KAyBLiF,EAAY,EAEhB,SAASC,EAAQC,GACf,OAASA,GAAO,IAAMA,EAAIlE,OAsGbmE,MA9Ef,SAAoBnB,EAAiBoB,GAA6C,IAAAC,EACpDC,mBAA2B,MADyBC,EAAAxG,OAAAiE,EAAA,EAAAjE,CAAAsG,EAAA,GACzE1C,EADyE4C,EAAA,GACjEC,EADiED,EAAA,GAAAE,EAEtDH,oBAA0B,GAF4BI,EAAA3G,OAAAiE,EAAA,EAAAjE,CAAA0G,EAAA,GAEzE1I,EAFyE2I,EAAA,GAG1EC,GAH0ED,EAAA,GAGjEE,kBAAQ,kBAxBzB,SAAkBC,GAChB,IAAItH,IAAOyG,EACX,OAAOlH,OAAO+H,GAAUtH,EAsBKuH,CAAS,eAAe,KAE/ClB,EAAUmB,iBAA+B,MACzCC,EAAgBD,iBAA+B,MAC/CE,EAA0BF,iBAA+B,MACzDG,EAAuBH,iBAA+B,MACtDI,EAAUJ,iBAA+B,MACzCK,EAAcL,iBAA+B,MAGnDM,oBAAU,WACHjB,IAILR,EAAQ0B,QAAWlB,EAAMnB,QAAUmB,EAAMnB,OAAOW,QAChDoB,EAAcM,QAAWlB,EAAMnB,QAAUmB,EAAMnB,OAAO+B,cACtDC,EAAwBK,QAAWlB,EAAMnB,QAAUmB,EAAMnB,OAAOgC,wBAChEC,EAAqBI,QAAWlB,EAAMnB,QAAUmB,EAAMnB,OAAOiC,qBAC7DC,EAAQG,QAAWlB,EAAMnB,QAAUmB,EAAMnB,OAAOkC,QAChDC,EAAYE,QAAWlB,EAAMnB,QAAUmB,EAAMnB,OAAOmC,eAGtD,IAAMG,GAAStB,EAAQjB,IAAYwC,EAAAtH,EAAAmE,cAAA,OAAK9E,GAAIoH,IAgD5C,OA9CAU,oBAAU,WACR,IAAIpB,EAAQjB,GAAZ,CAIA,IAAME,EAAckB,GAASA,EAAMlB,YAAe,GAG5CuC,EAAM,CACVC,MAAOtB,EAAOsB,MACdC,OAAQvB,EAAOuB,OACfpI,GAAIoH,EACJ3B,UACAE,cAGI0C,EAAyB,CAC7BhC,QAAS,SAACtG,GAAD,OAAQsG,EAAQ0B,SAAW1B,EAAQ0B,QAAQhI,IACpD0H,cAAe,SAAC1H,GAAD,OAAQ0H,EAAcM,SAAWN,EAAcM,QAAQhI,IACtE2H,wBAAyB,SAAC3H,GAAD,OAAQ2H,EAAwBK,SAAWL,EAAwBK,QAAQhI,IACpG4H,qBAAsB,SAAC5H,GAAD,OAAQ4H,EAAqBI,SAAWJ,EAAqBI,QAAQhI,IAC3F6H,QAAS,SAAC7H,GAAD,OAAQ6H,EAAQG,SAAWH,EAAQG,QAAQhI,IACpD8H,YAAa,SAAC9H,GAAD,OAAQ8H,EAAYE,SAAWF,EAAYE,QAAQhI,KAkBlE,OANKqE,EAGHA,EAAOkE,aAAa7C,GArCR,WAAA8C,EAAAhH,MAAAF,KAAAG,WAmCZgH,GAKK,WACLlC,QAAQmC,IAAI,WAzCA,SAAAF,IAAA,OAAAA,EAAA/H,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAyBd,SAAAe,IAAA,IAAA+G,EAAA,OAAAhI,EAAAC,EAAAI,KAAA,SAAAmB,GAAA,cAAAA,EAAAjB,KAAAiB,EAAAhB,MAAA,cAAAgB,EAAAhB,KAAA,EACyBqE,EAAc/E,OAAA4F,EAAA,EAAA5F,CAAA,GAChC0H,EAD+B,CAElCxC,OAAQ2C,KAHZ,cACQK,EADRxG,EAAAU,KAAAV,EAAAK,OAAA,SAMS0E,EAAUyB,IANnB,wBAAAxG,EAAAd,SAAAO,EAAAN,UAzBcE,MAAAF,KAAAG,aA4Cb,CAACiE,IAEG,CAACuC,QAAO5D,SAAQ5F,kCCxJV,SAASmK,EACtBC,EACAC,GAEA,IADAC,IACAtH,UAAAiB,OAAA,QAAAsG,IAAAvH,UAAA,KAAAA,UAAA,GACMwH,EAAiBxB,iBAAO,IAAIyB,IAAY,KACxCC,EAAS1B,iBAAO,CACpBoB,WAAY,GACZC,SAAW,aACXC,gBAAgB,IAGlBhB,oBACE,WACEoB,EAAOnB,QAAU,CAAEa,aAAYC,WAAUC,mBAFpC,GAAAnG,OAAAnC,OAAA2I,EAAA,EAAA3I,CAIHoI,GAJG,CAISC,EAAUC,KAG5B,IAAMM,EAAcC,sBAAY,SAACC,GAC/BN,EAAejB,QAAQrI,IAAI4J,EAAEC,KA8BjC,WAAyE,IAAjDC,EAAiDhI,UAAAiB,OAAA,QAAAsG,IAAAvH,UAAA,GAAAA,UAAA,GAAhC,GAAIiI,EAA4BjI,UAAAiB,OAAA,QAAAsG,IAAAvH,UAAA,GAAAA,UAAA,GAAJ,GACnE,GAAIgI,EAAK/G,SAAWgH,EAAYhH,OAC9B,OAAO,EAGT,IAAMiH,EAAc,IAAIT,IAAIO,GAK5B,OAJAC,EAAYE,QAAQ,SAAAJ,GAClBG,EAAY9J,OAAO2J,KAGO,IAArBG,EAAYE,KAvCOC,CACtBX,EAAOnB,QAAQa,WACfkB,MAAMC,KAAKf,EAAejB,WAGLmB,EAAOnB,QAAQe,iBACpCQ,EAAER,iBACFI,EAAOnB,QAAQc,aAEhB,IAEGmB,EAAYX,sBAAY,SAACC,GAC7BN,EAAejB,QAAQnI,OAAO0J,EAAEC,MAC/B,IAEHzB,oBACE,WAIE,OAHA1C,OAAO6E,iBAAiB,UAAWb,GACnChE,OAAO6E,iBAAiB,QAASD,GAE1B,WACL5E,OAAO8E,oBAAoB,UAAWd,GACtChE,OAAO8E,oBAAoB,QAASF,KAGxC,CAACZ,EAAaY,yBC9BlB,IAAMG,EAAK9H,KAAKc,UAiRDqD,MA5Qf,SAAgBK,GAKd,IAAM7G,EAAK6G,EAAMvH,MAAM4J,OAAOlJ,GAE5BoK,EACEC,YAAW,SAAC1J,GAAD,MAAyB,CACtCpC,mBAAoBoC,EAAEwD,IAAI5F,mBAC1B6L,+BAAgCzJ,EAAEyD,OAAOX,gCAHzC2G,+BAPgCtD,GAafU,iBAAO,GACFA,iBAAO,GACJA,kBAAQ,GACGT,mBAAS,IAhBbC,EAAAxG,OAAAiE,EAAA,EAAAjE,CAAAsG,EAAA,GAgB3BwD,EAhB2BtD,EAAA,GAgBduD,EAhBcvD,EAAA,GAAAE,EAiBIH,mBAAS,GAjBbI,EAAA3G,OAAAiE,EAAA,EAAAjE,CAAA0G,EAAA,GAAAsD,GAAArD,EAAA,GAAAA,EAAA,GAkBUJ,oBAAU,IAlBpB0D,EAAAjK,OAAAiE,EAAA,EAAAjE,CAAAgK,EAAA,GAkB3BE,EAlB2BD,EAAA,GAAAE,GAAAF,EAAA,GAmBF1D,oBAAS,IAnBP6D,EAAApK,OAAAiE,EAAA,EAAAjE,CAAAmK,EAAA,GAmB3BE,EAnB2BD,EAAA,GAoB5BE,GApB4BF,EAAA,GAoBdG,YAAS,SAACC,GAAD,OAAsBA,EAAEjH,YAAYD,OAAO9D,KAAM,CAACA,KACzEiL,EAAaF,YAAS,SAACC,GAAD,OAAsBA,EAAEnJ,OAAO,CAAC7B,IACtDkL,EAAcH,YAAS,SAACC,GAAD,OAAsBA,EAAE5G,QAAQ,CAACpE,IAW9D,GAVsBkL,EAAY3H,UAAUd,OAE5CqF,oBAAU,WACJmD,EAAWxL,YAGf2K,EAA+BpK,IAC9B,CAACA,EAAIiL,EAAWxL,cAGdO,EACH,OAAOiI,EAAAtH,EAAAmE,cAACqG,EAAA,EAAD,CAAUC,GAAG,MAGtB,IAAM3F,EAAU/C,cAAIoI,EAAa,OArCCO,EAuCVzE,EAAWnB,EAAS,CAC1C0C,MAAO,OACPC,OAAQ,OACRzC,WAAY,CAEV2F,MAAO,EACPC,GAAI,EACJC,IAAK,EACLC,UAAW,EACXC,eAAgB,KATb1D,EAvC2BqD,EAuC3BrD,MAAO5D,EAvCoBiH,EAuCpBjH,OAoId,SAASuH,EAAazK,GACpB,GAAKkD,EAAL,CACAkC,QAAQmC,IAAI,yBAA0BvH,EAAO,OAAS,QACtD,IAAM0K,EAAmBxH,EAAOyH,iBAChCvF,QAAQmC,IAAI,sBAAuBmD,GACnC,IAAMtB,ECvMK,SAA+BwB,GAC5C,IAAMC,EAAMD,EAAOE,WAAWC,MAAM,KADgCC,EAAA1L,OAAAiE,EAAA,EAAAjE,CAEhDuL,EAFgD,GAE7DI,EAF6DD,EAAA,GAExDhL,EAFwDgL,EAAA,GAG9DE,EAAY7M,OAAO2B,EAAO,OAAOmL,OAAO,EAAG,GAC3CC,EAAK,GAAA3J,OAAMwJ,GAANxJ,OAAYyJ,GAEvB,OAAOtI,OAAOwI,GDiMQC,CAAsBX,GACpC/L,EAlBR,SAAkC2M,GAChClG,QAAQmC,IAAI,UAAW+D,GACvB,IAAK,IAAIzK,EAAI,EAAGA,EAAImJ,EAAY3H,UAAUd,OAAQV,IAAK,CACrD,IAAM0K,EAAevB,EAAY3H,UAAUxB,GAC3C,GAAIyK,GAAQC,EAAanB,OAASkB,GAAQC,EAAaC,IAGrD,OAFApG,QAAQmC,IAAI,gBAAiBgE,EAAanB,OAC1ChF,QAAQmC,IAAI,cAAegE,EAAaC,KACjC3K,GAWG4K,CAAyBrC,GAEvC,QAAcvB,IAAVlJ,EAAJ,CAMA,IAAM+M,EAAY1B,EAAY3H,UAAU1D,GAClCgN,EAAS3B,EAAY3H,UAAU1D,EAAQ,GACvCiN,EAAS5B,EAAY3H,UAAU1D,EAAQ,GAE7C,GAAIqB,EAAM,CACR,IAAK2L,EAAQ,OACbvG,QAAQmC,IAAI,OAAQoE,GACpBzI,EAAO2I,QAAQF,EAAOvB,MAAQ,KAAO,KAAM,OACtC,CACL,IAAM0B,EAAO1C,EAAcsC,EAAUtB,MACjC0B,EAAO,KAAOF,IAChBxG,QAAQmC,IAAI,OAAQqE,GACpB1I,EAAO2I,OAAQD,EAAOxB,MAAS,KAAM,IAEnC0B,EAAO,MACT1G,QAAQmC,IAAI,UAAWmE,GACvBxI,EAAO2I,OAAQH,EAAUtB,MAAS,KAAM,SAtB5C,CACE,IAAM2B,EAAU/B,EAAY3H,UAAU,GACtCa,EAAO2I,OAAQE,EAAQ3B,MAAS,KAAM,KAyB1C,SAAS4B,EAAgBC,GACvB,IAAMC,EAAMtJ,OAAOqJ,GACnB,GAAK/I,EAAL,CAEA,IAAMiJ,EAAKjJ,EAAOkJ,cAAgB,GAAMF,EAClCG,EAAgB,IAARH,EAAY,EAAIC,EAE9BjJ,EAAO2I,OAAOQ,GAAO,IAqCvB,OA1LA5E,EAAyB,CAAC,KAAM,WACzBvE,IAC2B,IAA5BA,EAAOoJ,iBACTpJ,EAAOqJ,aAEPrJ,EAAOsJ,eAIX/E,EAAyB,CAAC,aAAc,WACjCvE,GACLuH,GAAa,KAEfhD,EAAyB,CAAC,cAAe,WAClCvE,GACLuH,GAAa,KAEfhD,EAAyB,CAAC,KAAM,kBAAMuE,EAAgB,OACtDvE,EAAyB,CAAC,KAAM,kBAAMuE,EAAgB,OACtDvE,EAAyB,CAAC,KAAM,kBAAMuE,EAAgB,OACtDvE,EAAyB,CAAC,KAAM,kBAAMuE,EAAgB,OACtDvE,EAAyB,CAAC,KAAM,kBAAMuE,EAAgB,OACtDvE,EAAyB,CAAC,KAAM,kBAAMuE,EAAgB,OACtDvE,EAAyB,CAAC,KAAM,kBAAMuE,EAAgB,OACtDvE,EAAyB,CAAC,KAAM,kBAAMuE,EAAgB,OACtDvE,EAAyB,CAAC,KAAM,kBAAMuE,EAAgB,OACtDvE,EAAyB,CAAC,KAAM,kBAAMuE,EAAgB,OE7GzC,SAAqBrE,EAA4B8E,GAC9D,IAAMC,EAAgBpG,iBAAyBqB,GAG/Cf,oBAAU,WACR8F,EAAc7F,QAAUc,IAI1Bf,oBAAU,WAKR,GAAc,OAAV6F,EAAgB,CAClB,IAAI3N,EAAK6N,YALX,WACED,EAAc7F,WAIa4F,GAC3B,OAAO,kBAAMG,cAAc9N,MAE5B,CAAC2N,IF2JJI,CAAY,WACL3J,GACLmG,EAAenG,EAAOyH,mBACrB,KA8FD5D,EAAAtH,EAAAmE,cAAA,WACEmD,EAAAtH,EAAAmE,cAAA,OAAKkJ,MAAO,CAAC5F,OAAQ,UAClBJ,GAEHC,EAAAtH,EAAAmE,cAACmJ,EAAA,EAAD,CAAQC,QAAS,kBAAM9J,EAAQsJ,aAAaS,KAAK,SACjDlG,EAAAtH,EAAAmE,cAACmJ,EAAA,EAAD,CAAQC,QAAS,kBAAM9J,EAAQqJ,cAAcU,KAAK,UAClDlG,EAAAtH,EAAAmE,cAACmJ,EAAA,EAAD,CAAQC,QAAS,kBAAM9J,EAAQgK,UAAU,KAAKD,KAAK,YACnDlG,EAAAtH,EAAAmE,cAAA,OAAKuJ,UAAWC,IAAOC,WACrBtG,EAAAtH,EAAAmE,cAAA,YAEAmD,EAAAtH,EAAAmE,cA7CN,WACE,IAAMiD,EAAUmD,EAAY3H,UAAUmH,GAChCxJ,EAAOgK,EAAY3H,UAAUmH,EAAiB,GAEpD,SAASlG,EAAKzE,GACZ,OACEkI,EAAAtH,EAAAmE,cAAA,OAAKuJ,UAAWC,IAAOE,oBACrBvG,EAAAtH,EAAAmE,cAAA,OAAKuJ,UAAWC,IAAOG,oBACrBxG,EAAAtH,EAAAmE,cAAA,qBACUqF,EAAGzH,cAAI3C,EAAI,WAErBkI,EAAAtH,EAAAmE,cAAA,mBACQqF,EAAGzH,cAAI3C,EAAI,SAEnBkI,EAAAtH,EAAAmE,cAAA,qBACUqF,EAAGU,KAGf5C,EAAAtH,EAAAmE,cAAA,WAAMqF,EAAGzH,cAAI3C,EAAI,WAKvB,OACEkI,EAAAtH,EAAAmE,cAAA,OAAKuJ,UAAWC,IAAOI,gBACrBzG,EAAAtH,EAAAmE,cAAA,sBAAc4F,EAAd,WAAsCJ,GACrC9F,EAAKuD,GACNE,EAAAtH,EAAAmE,cAAA,mBACCN,EAAKtD,KAiBN,uBGxRO,SAASyN,IAAO,IAE3BpQ,EACE8L,YAAW,SAAC1J,GAAD,MAAyB,CACtCpC,mBAAoBoC,EAAEwD,IAAI5F,sBAF1BA,mBAWF,OANAuJ,oBAAU,WACR8G,WAAW,WACTrQ,GAAmB,IAClB,MACF,IAEI,oDCPHsQ,EAAS,SAACrQ,GAAD,OAA8BA,GAS9BsQ,EAP6B,WAAoB,IAAAhI,EACzCC,oBAAkB,GAA9BgI,EADqDvO,OAAAiE,EAAA,EAAAjE,CAAAsG,EAAA,MAE9D,OAAO,WACLiI,EAASF,KCmBEG,GAhBc,WAC3B,IAAMC,EAA4BH,IAC5BI,EAAwCC,qBAAWC,KAEzD,IAAKF,EACH,MAAM,IAAIG,MAAM,oEAQlB,OALAvH,oBACE,kBACEoH,EAAcI,QAAQjM,OAAO4L,IAC/B,CAACC,IAEIA,GCrBM,SAASK,GAAM1I,GAC5B,IAAMoE,EAAaF,YAAS,SAACC,GAAD,OAAsBA,EAAEnJ,QAC9CvD,EAAkByM,YAAS,SAACC,GAAD,OAAsBA,EAAE7G,IAAI7F,kBACtDgR,EAAWN,KAAXM,QAHwCE,EAS3CnF,YAAW,SAAC1J,GAAD,MAAyB,CACtC8O,QAAS9O,EAAEkB,MAAMJ,MACjBiO,SAAU/O,EAAEkB,MAAMjC,OAClBrB,mBAAoBoC,EAAEwD,IAAI5F,sBAN1BkR,EAN6CD,EAM7CC,QACAC,EAP6CF,EAO7CE,SACAnR,EAR6CiR,EAQ7CjR,mBAqBF,SAASoR,IACP,OAAO1E,EAAWzL,MAAMoQ,IAAI,SAACpL,EAAMzC,GACjC,IAAM8N,EAAG,0BAAAlN,OAA6B6B,EAAKpF,IAAlC,kBACHH,EAAI,oBAAA0D,OAAuB6B,EAAKpF,KAEtC,OACE6I,EAAAtH,EAAAmE,cAAA,MAAIoJ,QAAS,kBAhBUlO,EAgBgBwE,EAAKxE,GAfhDsP,EAAQ3P,KAAR,SAAAgD,OAAsB3C,SACtBsG,QAAQmC,IAAI,uBAFd,IAA6BzI,GAgB0BuJ,IAAKxH,GACpDkG,EAAAtH,EAAAmE,cAAA,MAAIkJ,MAAO,CAAC7F,MAAO,IAAK2H,UAAW,WACjC7H,EAAAtH,EAAAmE,cAAA,KAAGiL,KAAM9Q,EAAM+Q,OAAO,UACpB/H,EAAAtH,EAAAmE,cAAA,OAAKuJ,UAAWC,IAAO2B,MAAOlL,IAAK8K,EAAKK,IAAI,OAGhDjI,EAAAtH,EAAAmE,cAAA,UACEmD,EAAAtH,EAAAmE,cAAA,eAAON,EAAKxE,KAEdiI,EAAAtH,EAAAmE,cAAA,MAAIkJ,MAAO,CAAC7F,MAAO,GAAI2H,UAAW,SAAUK,cAAe,WACzDlI,EAAAtH,EAAAmE,cAACmJ,EAAA,EAAD,CAAQmC,OAAO,SAASC,KAAK,SAASnC,QAAS,SAAC5E,GAAD,OArBzD,SAA8BA,EAAQtJ,GACpC0P,EAAS1P,GACTsJ,EAAEgH,kBAmBiEC,CAAqBjH,EAAG9E,EAAKxE,WAmClG,OAjEA8H,oBAAU,WACR2H,KACC,IA+CCxH,EAAAtH,EAAAmE,cAAC0L,EAAA,EAAD,CACExC,MAAO,CAAC7F,MAAO,OACfkI,KAAK,YACLI,MAAM,OACNC,OAAQpS,EACRqS,QAAS,kBAAMpS,GAAmB,IAClCqS,WAAW,EACXvC,UAAWwC,IAAQC,0BAEnB7I,EAAAtH,EAAAmE,cAAA,OAAKkJ,MAAO,CAAC+C,SAAU,SAAU3I,OAAQ,SAnB3CH,EAAAtH,EAAAmE,cAACkM,EAAA,EAAD,CAAWhD,MAAO,CAAC7F,MAAO,QAAS8I,aAAa,EAAMC,UAAU,GAC9DjJ,EAAAtH,EAAAmE,cAAA,aACC6K,QC5DM,SAASwB,KAAS,IAAA3B,EAI3BnF,YAAW,SAAC1J,GAAD,MAAyB,CACtCjC,oBAAqBiC,EAAEwD,IAAIzF,oBAC3B0S,YAAazQ,EAAEkB,MAAM3B,aAJrBkR,EAF6B5B,EAE7B4B,YACA1S,EAH6B8Q,EAG7B9Q,oBAgBF,OAVAiK,EAAyB,CAAC,QAAS,KAAM,WACvCjK,MAEFiK,EAAyB,CAAC,QAAS,KAAM,WAC7B0I,QAAQ,wBAEhBD,OAAYrI,KAKdd,EAAAtH,EAAAmE,cAACyK,GAAD,MCZJ+B,IAAkBC,sBAElB,IAAMlT,GAAQmT,YAAoBC,GAmBnBC,oLAfX,OACEzJ,EAAAtH,EAAAmE,cAAC6M,EAAA,EAAD,CAAetT,MAAOA,IACpB4J,EAAAtH,EAAAmE,cAAC8M,EAAA,EAAD,CAAQC,SAAU9S,mCAChBkJ,EAAAtH,EAAAmE,cAAA,WACEmD,EAAAtH,EAAAmE,cAACqG,EAAA,EAAD,CAAO2G,OAAK,EAACC,KAAK,IAAIC,UAAWrD,IACjC1G,EAAAtH,EAAAmE,cAACqG,EAAA,EAAD,CAAO4G,KAAK,YAAYC,UAAWxL,IACnCyB,EAAAtH,EAAAmE,cAACqG,EAAA,EAAD,CAAO2G,OAAK,EAACC,KAAK,QAAQC,UAAWxL,IACrCyB,EAAAtH,EAAAmE,cAACqM,GAAD,gBATMc,aCdlBC,IAASC,OAAOlK,EAAAtH,EAAAmE,cAACsN,GAAD,MAASvN,SAASwN,eAAe,6BCHjDC,EAAAC,QAAA,CAAkBhE,UAAA,0BAAAG,eAAA,+BAAAF,mBAAA,mCAAAC,mBAAA,wDCAlB6D,EAAAC,QAAA,CAAkBtC,MAAA","file":"static/js/main.e4908dc7.chunk.js","sourcesContent":["import axios from '../utils/axios';\nimport { Action, listen, Listen, thunk, Thunk } from 'easy-peasy';\nimport defaultTaskList from \"../misc/default-task.js\";\nimport parseYoutubeUrl from \"../utils/parse-youtube-url\";\n\nexport enum TaskSource {\n  YOUTUBE = 'youtube',\n  AUDIO = 'audio',\n}\n\nexport interface Task {\n  id: number,\n  url: string,\n  source: TaskSource,\n  plainSubtitles: string,\n}\n\nexport interface ITasksState {\n  items: Task[],\n  isFetching: boolean,\n  listeners: Listen<ITasksActions>;\n}\n\ninterface ITasksActions {\n  add: Action<ITasksState, Task>,\n  delete: Action<ITasksState, number>,\n  deleteAll: Action<ITasksState>,\n  setItems: Action<ITasksState, Task[]>,\n  setFetching: Action<ITasksState, boolean>,\n  syncWithLocalstorage: Action<ITasksState>;\n  clear: Thunk<ITasksActions>;\n  fetch: Thunk<ITasksActions>;\n}\n\nexport type ITasksStore = ITasksState & ITasksActions;\n\nconst store: ITasksStore = {\n  items: [],\n  isFetching: true,\n  add: (state, payload) => {\n    state.items.push(payload)\n  },\n  delete: (state, payload) => {\n    let index = state.items.findIndex(__ => __.id === payload);\n    state.items.splice(index, 1)\n  },\n  deleteAll: (state) => {\n    state.items = [];\n  },\n  setItems: (state, payload) => {\n    state.items = payload;\n  },\n  setFetching: (state, payload) => {\n    state.isFetching = payload;\n  },\n  clear: thunk(async (actions) => {\n    actions.deleteAll(null);\n    actions.syncWithLocalstorage(null);\n  }),\n  fetch: thunk(async (actions) => {\n    actions.setFetching(true);\n    const raw = localStorage.getItem(\"app_items\");\n    if (raw) {\n      const tasks = JSON.parse(raw);\n      actions.setItems(tasks);\n      actions.setFetching(false);\n      return;\n    }\n\n    const defaultTasks = [];\n\n    for (let i = 0; i < defaultTaskList.length; i++) {\n      const defaultTaskListElement = defaultTaskList[i];\n      const res = await axios.get(`/${defaultTaskListElement.subtitle}`);\n      const t: Task = {\n        id: i,\n        plainSubtitles: res.data,\n        source: TaskSource.YOUTUBE,\n        url: parseYoutubeUrl(defaultTaskListElement.link),\n      };\n      defaultTasks.push(t);\n    }\n\n    actions.setItems(defaultTasks);\n    actions.syncWithLocalstorage(null);\n    actions.setFetching(false);\n  }),\n  syncWithLocalstorage: (state) => {\n    localStorage.setItem(\"app_items\", JSON.stringify(state.items));\n  },\n  listeners: listen(on => {\n    on(store.delete, (actions) => {\n      actions.syncWithLocalstorage(null);\n    });\n  })\n};\n\nexport default store;\n","import { Action } from \"easy-peasy\";\n\ninterface IAppState {\n  isOpenListModal: boolean,\n}\n\nexport interface IAppActions {\n  setIsOpenListModal: Action<IAppState, boolean>,\n  toggleOpenListModal: Action<IAppState, undefined>,\n}\n\nexport type IAppStore = IAppState & IAppActions;\n\nconst store: IAppStore = {\n  isOpenListModal: false,\n  setIsOpenListModal: (state, payload) => {\n    state.isOpenListModal = payload\n  },\n  toggleOpenListModal: (state) => {\n    state.isOpenListModal = !state.isOpenListModal\n  }\n};\n\nexport default store;\n","import axios from 'axios';\n\nconst instance = axios.create({\n  baseURL: process.env.PUBLIC_URL,\n});\n\nexport default instance;\n","export default [\n  {\n    link: \"https://www.youtube.com/watch?v=XfAMirWVpjQ\",\n    subtitle: \"[DownSub.com] Do I speak slowly_ [How to understand native English speakers].srt\",\n  },\n  {\n    link: \"https://www.youtube.com/watch?v=o8NPllzkFhE\",\n    subtitle: \"[DownSub.com] Who I'm Voting for President re_ Casey Neistat.srt\",\n  },\n  {\n    link: \"https://youtu.be/quJdL9ggETI\",\n    subtitle: \"[DownSub.com] Margaret Gould Stewart_ How giant websites design for you (and a billion others, too).srt\",\n  },\n  {\n    link: \"https://youtu.be/H2QxFM9y0tY\",\n    subtitle: \"[DownSub.com] The disarming case to act right now on climate change _ Greta Thunberg.srt\",\n  },\n  {\n    link: \"https://youtu.be/pj8n78AuN3w\",\n    subtitle: \"[DownSub.com] YouTube's Rules Don't Apply to Everyone.srt\",\n  },\n  {\n    link: \"https://youtu.be/jAhjPd4uNFY\",\n    subtitle: \"[DownSub.com] Genetic Engineering Will Change Everything Forever â€“ CRISPR.srt\",\n  },\n  {\n    link: \"https://youtu.be/DHg5j9cTb2k?t=32\",\n    subtitle: \"[DownSub.com] Genetic Engineering Will Change Everything Forever â€“ CRISPR.srt\",\n  },\n  {\n    link: \"https://www.youtube.com/watch?time_continue=0&v=5VE9nihee7o\",\n    subtitle: \"[DownSub.com] Hillary Clinton_ The Vox Conversation.srt\",\n  },\n\n]\n","export default function parseYoutubeUrl(url: string): string {\n  const regexp = /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=|attribution_link\\?a=.+?watch.+?v(?:%|=)))((\\w|-){11})(?:\\S+)?$/;\n  const res = url.match(regexp);\n  return String(res![1]);\n}\n","import { Action, Select, select, thunk, Thunk } from 'easy-peasy';\n// @ts-ignore\nimport * as subtitleLib from 'subtitle';\nimport { IStore } from './index';\n\nexport interface ISubtitleItem {\n  start: number,\n  end: number,\n  text: string,\n  settings?: string,\n}\n\ninterface IPlayerState {\n  subtitles: ISubtitleItem[],\n  isFetching: boolean,\n}\n\ninterface IPlayerActions {\n  setSubtitles: Action<IPlayerState, ISubtitleItem[]>,\n  setFetching: Action<IPlayerState, boolean>,\n  fetchSubtitlesFromTasksStore: Thunk<IPlayerActions, string, any, IStore>;\n}\n\nexport type IPlayerStore = IPlayerState & IPlayerActions;\n\nconst store: IPlayerStore = {\n  subtitles: [],\n  isFetching: true,\n  setSubtitles: (state, payload) => {\n    state.subtitles = payload;\n  },\n  setFetching: (state, payload) => {\n    state.isFetching = payload;\n  },\n  fetchSubtitlesFromTasksStore: thunk(async (actions, payload, helpers) => {\n    const state = helpers.getState();\n    const id = Number(payload);\n    const task = state.getTaskById(id);\n\n    if (!task) {\n      return;\n    }\n\n    const sb = subtitleLib.parse(task.plainSubtitles);\n    actions.setSubtitles(sb);\n    actions.setFetching(false);\n  })\n};\n\nexport default store;\n","import { Select } from \"easy-peasy\";\n\nimport app, { IAppStore } from './app.store';\nimport tasks, { ITasksStore } from './tasks.store';\nimport player, { IPlayerStore } from './player.store';\nimport { getTaskById } from './selectors';\n\nexport interface IStore {\n  app: IAppStore,\n  tasks: ITasksStore,\n  player: IPlayerStore,\n  getTaskById: Select<IStore>,\n}\n\nexport default {\n  app,\n  tasks,\n  player,\n  // ðŸ‘‡ selectors\n  getTaskById,\n}\n","import { select } from 'easy-peasy';\nimport { IStore } from './index';\nimport { Task } from \"./tasks.store\";\n\nexport const getTaskById = select<IStore>(state => (id: number) => {\n  const [task] = state.tasks.items.filter((item: Task) => item.id === id);\n  return task;\n});\n","import React, { ReactNode, useState, useEffect, useMemo, useRef } from \"react\";\n\ndeclare global {\n  interface Window {\n    onYouTubeIframeAPIReady: any\n    YT: any\n  }\n}\n\ninterface BuildTYOptions {\n  id: string,\n  videoId: string,\n  events: any,\n  playerVars: any,\n}\n\nconst YTScriptLoad = new Promise(res => {\n  const tag = document.createElement('script');\n  tag.src = `https://www.youtube.com/iframe_api`;\n  const firstScriptTag = document.getElementsByTagName('script')[0];\n  firstScriptTag!.parentNode!.insertBefore(tag, firstScriptTag);\n  window.onYouTubeIframeAPIReady = () => res(window.YT);\n});\n\n\nconst BuildYTPlayer = (options: BuildTYOptions): any => {\n  const {id, videoId, events, playerVars, ...otherProps} = options;\n\n  return new Promise(async (resolve, reject) => {\n    const YTp: any = await YTScriptLoad;\n    const isExist = document.querySelector(`#${id}`) !== null;\n    const finishEvents = {\n      ...events,\n      onReady() {\n        resolve(player);\n      },\n    };\n\n    if (!isExist) {\n      console.warn(`YouTube hook: div #${id} not found.`);\n    }\n\n    const player = new YTp.Player(id, {\n      ...otherProps,\n      videoId,\n      playerVars: playerVars,\n      events: finishEvents,\n    });\n\n    return player;\n  })\n};\n\nlet idCounter = 0;\n\nfunction isEmpty(str: string): boolean {\n  return (!str || 0 === str.length);\n}\n\nfunction uniqueId(prefix: string) {\n  let id = ++idCounter;\n  return String(prefix) + id;\n}\n\nexport interface YoutubeHookProps {\n  width?: string | number;\n  height?: string | number;\n  playerVars?: YT.PlayerVars,\n  events?: YT.Events,\n}\n\n\nexport interface YoutubeHookResult {\n  video: ReactNode,\n  player: YT.Player | null,\n  state: YT.PlayerState,\n}\n\ntype CallbackFunction = () => void;\n\nfunction useYoutube(videoId: string, props?: YoutubeHookProps): YoutubeHookResult {\n  const [player, setPlayer] = useState<YT.Player | null>(null);\n  const [state, setState] = useState<YT.PlayerState>(-1);\n  const htmlId = useMemo(() => uniqueId('unq-yt-id-'), []);\n  // events\n  const onReady = useRef<CallbackFunction | any>(null);\n  const onStateChange = useRef<CallbackFunction | any>(null);\n  const onPlaybackQualityChange = useRef<CallbackFunction | any>(null);\n  const onPlaybackRateChange = useRef<CallbackFunction | any>(null);\n  const onError = useRef<CallbackFunction | any>(null);\n  const onApiChange = useRef<CallbackFunction | any>(null);\n\n  // Remember the latest callback.\n  useEffect(() => {\n    if (!props) {\n      return;\n    }\n\n    onReady.current = (props.events && props.events.onReady);\n    onStateChange.current = (props.events && props.events.onStateChange);\n    onPlaybackQualityChange.current = (props.events && props.events.onPlaybackQualityChange);\n    onPlaybackRateChange.current = (props.events && props.events.onPlaybackRateChange);\n    onError.current = (props.events && props.events.onError);\n    onApiChange.current = (props.events && props.events.onApiChange);\n  });\n\n  const video = !isEmpty(videoId) && <div id={htmlId}/>;\n\n  useEffect(() => {\n    if (isEmpty(videoId)) {\n      return;\n    }\n\n    const playerVars = (props && props.playerVars) || {};\n    // const events = (props && props.events) || {};\n\n    const opt = {\n      width: props!.width,\n      height: props!.height,\n      id: htmlId,\n      videoId,\n      playerVars,\n    };\n\n    const finalEvents: YT.Events = {\n      onReady: (__) => onReady.current && onReady.current(__),\n      onStateChange: (__) => onStateChange.current && onStateChange.current(__),\n      onPlaybackQualityChange: (__) => onPlaybackQualityChange.current && onPlaybackQualityChange.current(__),\n      onPlaybackRateChange: (__) => onPlaybackRateChange.current && onPlaybackRateChange.current(__),\n      onError: (__) => onError.current && onError.current(__),\n      onApiChange: (__) => onApiChange.current && onApiChange.current(__),\n    };\n\n    async function load() {\n      const ytPlayer = await BuildYTPlayer({\n        ...opt,\n        events: finalEvents,\n      });\n      // events.onReady && events.onReady({target: ytPlayer});\n      return setPlayer(ytPlayer);\n    }\n\n    if (!player) {\n      load();\n    } else {\n      player.cueVideoById(videoId);\n    }\n\n    return () => {\n      console.log(\"return\");\n    };\n\n  }, [videoId]);\n\n  return {video, player, state};\n}\n\n\nexport default useYoutube;\n","import { useCallback, useEffect, useRef } from 'react'\n\nexport default function useMultiKeyPressCallback(\n  targetKeys: string[],\n  callback: () => void,\n  preventDefault = true,\n) {\n  const pressedKeysRef = useRef(new Set<string>([]));\n  const params = useRef({\n    targetKeys: [] as string[],\n    callback: (() => undefined) as () => void,\n    preventDefault: true,\n  });\n\n  useEffect(\n    () => {\n      params.current = { targetKeys, callback, preventDefault }\n    },\n    [...targetKeys, callback, preventDefault],\n  );\n\n  const downHandler = useCallback((e: KeyboardEvent) => {\n    pressedKeysRef.current.add(e.key);\n    const hasPressedCombo = areKeysPressed(\n      params.current.targetKeys,\n      Array.from(pressedKeysRef.current),\n    );\n\n    if (hasPressedCombo && params.current.preventDefault) {\n      e.preventDefault();\n      params.current.callback()\n    }\n  }, []);\n\n  const upHandler = useCallback((e: KeyboardEvent) => {\n    pressedKeysRef.current.delete(e.key)\n  }, []);\n\n  useEffect(\n    () => {\n      window.addEventListener('keydown', downHandler);\n      window.addEventListener('keyup', upHandler);\n\n      return () => {\n        window.removeEventListener('keydown', downHandler);\n        window.removeEventListener('keyup', upHandler);\n      }\n    },\n    [downHandler, upHandler],\n  )\n}\n\nfunction areKeysPressed(keys: string[] = [], pressedKeys: string[] = []) {\n  if (keys.length !== pressedKeys.length) {\n    return false;\n  }\n\n  const keysToCheck = new Set(keys);\n  pressedKeys.forEach(key => {\n    keysToCheck.delete(key)\n  });\n\n  return keysToCheck.size === 0\n}\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Actions, State, useActions, useStore } from \"easy-peasy\";\nimport { IStore } from \"../../store\";\nimport useYoutube from \"../../hooks/useYoutube\";\nimport { Redirect } from \"react-router\";\nimport { get } from 'lodash';\nimport { Button } from '@blueprintjs/core';\nimport useMultiKeyPressCallback from \"../../hooks/useMultiKeyPressCallback\";\n\nimport styles from './Player.module.css';\nimport useInterval from '../../hooks/useInterval';\nimport { func } from \"prop-types\";\nimport secondsToMilliseconds from '../../utils/seconds-to-milliseconds';\n\ninterface PlayerProps {\n  [key: string]: any;\n}\n\nconst jj = JSON.stringify;\n\ntype CallbackFunction = () => void;\n\n\nfunction Player(props: PlayerProps) {\n  // const renderCountRef = useRef(0);\n  // if (renderCountRef.current > 7) {\n  //   console.log(\"RENDER:\", ++renderCountRef.current);\n  // }\n  const id = props.match.params.id;\n  const {\n    onFetchSubtitlesFromTasksStore,\n  } = useActions((a: Actions<IStore>) => ({\n    setIsOpenListModal: a.app.setIsOpenListModal,\n    onFetchSubtitlesFromTasksStore: a.player.fetchSubtitlesFromTasksStore,\n  }));\n\n  const timeoutRef = useRef(0);\n  const timeoutCountRef = useRef(0);\n  const prevPlayerStateRef = useRef(-1);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [updateValue, setUpdateValue] = useState(0);\n  const [sbCurrentIndex, setSbCurrentIndex] = useState(-1);\n  const [sbIsShow, setSbIsShow] = useState(false);\n  const currentTask = useStore((s: State<IStore>) => s.getTaskById(Number(id)), [id]);\n  const tasksState = useStore((s: State<IStore>) => s.tasks, [id]);\n  const playerState = useStore((s: State<IStore>) => s.player, [id]);\n  const subtitlesSize = playerState.subtitles.length;\n\n  useEffect(() => {\n    if (tasksState.isFetching) {\n      return;\n    }\n    onFetchSubtitlesFromTasksStore(id);\n  }, [id, tasksState.isFetching]);\n\n\n  if (!id) {\n    return <Redirect to=\"/\"/>;\n  }\n\n  const videoId = get(currentTask, 'url');\n\n  const {video, player} = useYoutube(videoId, {\n    width: '100%',\n    height: '100%',\n    playerVars: {\n      // controls: 0,\n      start: 1,\n      fs: 0,\n      rel: 0,\n      disablekb: 1,\n      modestbranding: 3,\n    },\n    // events: {\n    //   onStateChange: ({target}) => update(target),\n    // },\n  });\n\n  // useEffect(() => {\n  //   if (!player) {\n  //     return;\n  //   }\n  //   update(player);\n  // }, [updateValue]);\n\n\n  // Space key\n  useMultiKeyPressCallback([' '], () => {\n    if (!player) return;\n    if (player.getPlayerState() === 1) {\n      player.pauseVideo();\n    } else {\n      player.playVideo();\n    }\n  });\n\n  useMultiKeyPressCallback(['ArrowLeft'], () => {\n    if (!player) return;\n    checkAndSeek(false);\n  });\n  useMultiKeyPressCallback(['ArrowRight'], () => {\n    if (!player) return;\n    checkAndSeek(true);\n  });\n  useMultiKeyPressCallback(['1'], () => handleNumberKey('1'));\n  useMultiKeyPressCallback(['2'], () => handleNumberKey('2'));\n  useMultiKeyPressCallback(['3'], () => handleNumberKey('3'));\n  useMultiKeyPressCallback(['4'], () => handleNumberKey('4'));\n  useMultiKeyPressCallback(['5'], () => handleNumberKey('5'));\n  useMultiKeyPressCallback(['6'], () => handleNumberKey('6'));\n  useMultiKeyPressCallback(['7'], () => handleNumberKey('7'));\n  useMultiKeyPressCallback(['8'], () => handleNumberKey('8'));\n  useMultiKeyPressCallback(['9'], () => handleNumberKey('9'));\n  useMultiKeyPressCallback(['0'], () => handleNumberKey('0'));\n\n\n  /**\n   * deprecated\n   */\n  function update(yt: YT.Player) {\n    // const currentTime = yt.getCurrentTime();\n    if (playerState.subtitles.length === 0 || !player) {\n      return;\n    }\n    const state = player.getPlayerState();\n    const x = 400;\n\n    if (state === YT.PlayerState.PLAYING) {\n      if (\n        prevPlayerStateRef.current !== YT.PlayerState.PLAYING\n        && prevPlayerStateRef.current !== YT.PlayerState.PAUSED\n      ) {\n        console.log('%c PLAYING', 'background: #222; color: #bada55');\n        console.log(\"start video\");\n        const newSb = playerState.subtitles[0];\n        setSbCurrentIndex(0);\n        timeoutCountRef.current = newSb.end - x;\n        console.log(\"timeoutCountRef.current\", timeoutCountRef.current);\n        console.time('kk');\n\n        setTimeout(() => {\n          setUpdateValue(updateValue + 1);\n          console.timeEnd('kk');\n          console.log('%c go next !', 'background: red; color: #fff', timeoutCountRef.current);\n        }, timeoutCountRef.current);\n        console.log('%c PLAYING END', 'background: #222; color: #bada55');\n\n      } else if (\n        prevPlayerStateRef.current === YT.PlayerState.PLAYING\n      ) {\n        console.log('%c NEXT SUB', 'background: #222; color: #bada55');\n        console.log(\"sbCurrentIndex = \", sbCurrentIndex);\n        console.log(\"timeoutCountRef.current\", timeoutCountRef.current);\n        const newIndex = sbCurrentIndex + 1;\n        setSbCurrentIndex(newIndex);\n        const newSb = playerState.subtitles[newIndex];\n        timeoutCountRef.current = newSb.end - timeoutCountRef.current - x;\n\n        console.time('kk');\n        setTimeout(() => {\n          setUpdateValue(updateValue + 1);\n          console.log('%c go next __ !', 'background: red; color: #fff', timeoutCountRef.current);\n          console.timeEnd('kk');\n        }, timeoutCountRef.current);\n        console.log('%c NEXT SUB END', 'background: #222; color: #bada55');\n      }\n    } else if (state === YT.PlayerState.PAUSED) {\n\n      console.log(\"PAUSED\");\n    } else if (state === YT.PlayerState.BUFFERING) {\n      console.log('BUFFERING');\n    } else {\n      // console.log(\"state = \", state);\n    }\n    prevPlayerStateRef.current = state;\n  }\n\n  useInterval(() => {\n    if (!player) return;\n    setCurrentTime(player.getCurrentTime());\n  }, 300);\n\n  function findCurrentSubtitleIndex(time: number) {\n    console.log(\"time = \", time);\n    for (let i = 0; i < playerState.subtitles.length; i++) {\n      const videoElement = playerState.subtitles[i];\n      if (time >= videoElement.start && time <= videoElement.end) {\n        console.log(\"time.start = \", videoElement.start);\n        console.log(\"time.end = \", videoElement.end);\n        return i;\n      }\n    }\n  }\n\n  function checkAndSeek(next: boolean) {\n    if (!player) return;\n    console.log(\"......................\", next ? 'next' : 'prev');\n    const plainCurrentTime = player.getCurrentTime();\n    console.log(\"plainCurrentTime = \", plainCurrentTime);\n    const currentTime = secondsToMilliseconds(plainCurrentTime);\n    const index = findCurrentSubtitleIndex(currentTime);\n\n    if (index === undefined) {\n      const firstSb = playerState.subtitles[0];\n      player.seekTo((firstSb.start) / 1000, true);\n      return;\n    }\n\n    const currentSb = playerState.subtitles[index];\n    const nextSb = playerState.subtitles[index + 1];\n    const prevSb = playerState.subtitles[index - 1];\n\n    if (next) {\n      if (!nextSb) return;\n      console.log(\"Next\", nextSb);\n      player.seekTo((nextSb.start - 200) / 1000, true);\n    } else {\n      const diff = currentTime - currentSb.start;\n      if (diff < 800 && prevSb) {\n        console.log(\"Prev\", prevSb);\n        player.seekTo((prevSb.start) / 1000, true);\n      }\n      if (diff > 800) {\n        console.log(\"Current\", currentSb);\n        player.seekTo((currentSb.start) / 1000, true);\n      }\n    }\n  }\n\n  function handleNumberKey(k: string) {\n    const num = Number(k);\n    if (!player) return;\n\n    const x = (player.getDuration() / 10) * num;\n    const seekX = num === 0 ? 0 : x;\n\n    player.seekTo(seekX, true);\n  }\n\n  function SubtitlesDebug() {\n    const current = playerState.subtitles[sbCurrentIndex];\n    const next = playerState.subtitles[sbCurrentIndex + 1];\n\n    function item(__: any) {\n      return (\n        <div className={styles.SubtitlesDebugItem}>\n          <div className={styles.SubtitlesDebugTime}>\n            <div>\n              start: {jj(get(__, 'start'))}\n            </div>\n            <div>\n              end: {jj(get(__, 'end'))}\n            </div>\n            <div>\n              show?: {jj(sbIsShow)}\n            </div>\n          </div>\n          <pre>{jj(get(__, 'text'))}</pre>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.SubtitlesDebug}>\n        <h3>Current: {sbCurrentIndex}, time: {currentTime}</h3>\n        {item(current)}\n        <h3>Next:</h3>\n        {item(next)}\n      </div>\n    )\n  }\n\n\n  return (\n    <div>\n      <div style={{height: '100vh'}}>\n        {video}\n      </div>\n      <Button onClick={() => player!.playVideo()} text=\"play\"/>\n      <Button onClick={() => player!.pauseVideo()} text=\"pause\"/>\n      <Button onClick={() => player!.setVolume(70)} text=\"set vol\"/>\n      <div className={styles.container}>\n        <div>\n        </div>\n        <SubtitlesDebug/>\n      </div>\n    </div>\n  )\n}\n\n\nexport default Player;\n","export default function secondsToMilliseconds(second: number): number {\n  const arr = second.toString().split('.');\n  const [sec, next] = arr;\n  const fixedNext = String(next + '000').substr(0, 3);\n  const final = `${sec}${fixedNext}`;\n\n  return Number(final);\n}\n","import React, { useEffect, useRef } from 'react';\n\ntype CallbackFunction = () => void;\n\nexport default function useInterval(callback: CallbackFunction, delay: number) {\n  const savedCallback = useRef<CallbackFunction>(callback);\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  });\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n","import React, { useEffect } from \"react\";\nimport { Actions, useActions } from \"easy-peasy\";\nimport { IStore } from \"../../store\";\n\nexport default function Home() {\n  const {\n    setIsOpenListModal,\n  } = useActions((a: Actions<IStore>) => ({\n    setIsOpenListModal: a.app.setIsOpenListModal,\n  }));\n\n  useEffect(() => {\n    setTimeout(() => {\n      setIsOpenListModal(true);\n    }, 400);\n  }, []);\n\n  return null\n}\n","import { useState } from 'react';\n\ninterface VoidFunction {\n  (): void;\n}\n\ninterface VoidFunctionCreator {\n  (): VoidFunction;\n}\n\nconst toggle = (state: boolean): boolean => !state;\n\nconst useForceUpdate: VoidFunctionCreator = (): VoidFunction => {\n  const [, setState] = useState<boolean>(true);\n  return (): void => {\n    setState(toggle);\n  };\n};\n\nexport default useForceUpdate;\n","// @ts-ignore\nimport { useContext, useEffect } from 'react';\n\n// @ts-ignore\nimport { __RouterContext, RouteComponentProps } from 'react-router';\nimport useForceUpdate from './useForceUpdate';\n\ninterface UseRouter {\n  <T = {}>(): RouteComponentProps<T>;\n}\n\ninterface VoidFunction {\n  (): void;\n}\n\n/**\n * Work only with react-router@4.4.0 +\n */\nconst useRouter: UseRouter = <T = {}>(): RouteComponentProps<T> => {\n  const forceUpdate: VoidFunction = useForceUpdate();\n  const routerContext: RouteComponentProps<T> = useContext(__RouterContext);\n\n  if (!routerContext) {\n    throw new Error('use-react-router may only be used within a react-router context.');\n  }\n\n  useEffect(\n    (): VoidFunction =>\n      routerContext.history.listen(forceUpdate),\n    [routerContext]\n  );\n  return routerContext;\n};\n\nexport default useRouter;\n","import React, { useEffect } from \"react\";\nimport { Button, Classes, Dialog, HTMLTable } from \"@blueprintjs/core\";\nimport { useActions, useStore, State, Actions } from \"easy-peasy\";\nimport { IStore } from \"../../store\";\nimport styles from \"./Tasks.module.css\";\nimport useRouter from \"../../hooks/useReactRouter\";\n\ninterface TasksProps {\n}\n\nexport default function Tasks(props: TasksProps) {\n  const tasksState = useStore((s: State<IStore>) => s.tasks);\n  const isOpenListModal = useStore((s: State<IStore>) => s.app.isOpenListModal);\n  const {history} = useRouter();\n\n  const {\n    onFetch,\n    onDelete,\n    setIsOpenListModal,\n  } = useActions((a: Actions<IStore>) => ({\n    onFetch: a.tasks.fetch,\n    onDelete: a.tasks.delete,\n    setIsOpenListModal: a.app.setIsOpenListModal,\n  }));\n\n  useEffect(() => {\n    onFetch();\n  }, []);\n\n  function handleTableRowClick(id: number) {\n    history.push(`/play/${id}`);\n    console.log(\"handleTableRowClick\");\n  }\n\n  function handleDeleteRowClick(e: any, id: number) {\n    onDelete(id);\n    e.stopPropagation();\n  }\n\n  function renderTableList() {\n    return tasksState.items.map((item, i) => {\n      const img = `https://i.ytimg.com/vi/${item.url}/hqdefault.jpg`;\n      const link = `https://youtu.be/${item.url}`;\n\n      return (\n        <tr onClick={() => handleTableRowClick(item.id)} key={i}>\n          <td style={{width: 120, textAlign: 'center'}}>\n            <a href={link} target=\"_blank\">\n              <img className={styles.image} src={img} alt=\"\"/>\n            </a>\n          </td>\n          <td>\n            <h4># {item.id}</h4>\n          </td>\n          <td style={{width: 80, textAlign: 'center', verticalAlign: 'middle'}}>\n            <Button intent=\"danger\" icon=\"delete\" onClick={(e: any) => handleDeleteRowClick(e, item.id)}/>\n          </td>\n        </tr>\n      )\n    });\n  }\n\n  function renderTable() {\n    return (\n      <HTMLTable style={{width: '100%'}} interactive={true} bordered={true}>\n        <tbody>\n        {renderTableList()}\n        </tbody>\n      </HTMLTable>\n    );\n  }\n\n  function renderDialog() {\n    return (\n      <Dialog\n        style={{width: '70%'}}\n        icon=\"info-sign\"\n        title=\"List\"\n        isOpen={isOpenListModal}\n        onClose={() => setIsOpenListModal(false)}\n        usePortal={true}\n        className={Classes.OVERLAY_SCROLL_CONTAINER}\n      >\n        <div style={{overflow: 'scroll', height: '70vh'}}>\n          {renderTable()}\n        </div>\n      </Dialog>\n    );\n  }\n\n  return renderDialog();\n}\n\n\n","import React from \"react\";\nimport { Actions, useActions } from \"easy-peasy\";\nimport { IStore } from \"../../store\";\nimport Tasks from \"../Tasks/Tasks\";\nimport useMultiKeyPressCallback from \"../../hooks/useMultiKeyPressCallback\";\n\nexport default function Common() {\n  const {\n    onTaskClear,\n    toggleOpenListModal,\n  } = useActions((a: Actions<IStore>) => ({\n    toggleOpenListModal: a.app.toggleOpenListModal,\n    onTaskClear: a.tasks.deleteAll,\n  }));\n\n  useMultiKeyPressCallback(['Shift', 'J'], () => {\n    toggleOpenListModal();\n  });\n  useMultiKeyPressCallback(['Shift', 'R'], () => {\n    const x = confirm(\"Clear LocalStorage?\")\n    if (x) {\n      onTaskClear(undefined);\n    }\n  });\n\n  return (\n    <Tasks/>\n  );\n}\n","import React, { Component } from 'react';\n// import { Router, Link, createHistory, LocationProvider } from \"@reach/router\"\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nimport { FocusStyleManager } from \"@blueprintjs/core\";\nimport { StoreProvider, createStore } from 'easy-peasy';\nimport plainStore, { IStore } from \"../../store\";\nimport Player from \"../Player/Player\";\n\nimport '../../../node_modules/@blueprintjs/core/lib/css/blueprint.css';\nimport './App.css';\nimport Home from '../Home/Home';\nimport Common from \"../Common/Common\";\n\nFocusStyleManager.onlyShowFocusOnTabs();\n\nconst store = createStore<IStore>(plainStore);\n\nclass App extends Component {\n  render() {\n    return (\n      <StoreProvider store={store}>\n        <Router basename={process.env.PUBLIC_URL}>\n          <div>\n            <Route exact path=\"/\" component={Home}/>\n            <Route path=\"/play/:id\" component={Player}/>\n            <Route exact path=\"/play\" component={Player}/>\n            <Common/>\n          </div>\n        </Router>\n      </StoreProvider>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Player_container__1Yacn\",\"SubtitlesDebug\":\"Player_SubtitlesDebug__t0saq\",\"SubtitlesDebugItem\":\"Player_SubtitlesDebugItem__2BZE7\",\"SubtitlesDebugTime\":\"Player_SubtitlesDebugTime__3Ftel\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"Tasks_image__3yXbi\"};"],"sourceRoot":""}