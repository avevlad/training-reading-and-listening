(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),u=n(14),o=n.n(u),c=n(50),s=n(51),l=n(63),b=n(52),f=n(65),m=n(62),d=n(15),h=n(121),p=n(3),g={isOpenListModal:!1,setIsOpenListModal:function(e,t){e.isOpenListModal=t},toggleOpenListModal:function(e){e.isOpenListModal=!e.isOpenListModal}},v=n(8),w=n.n(v),y=n(19),O=n(53),E=n.n(O).a.create({baseURL:"/training-reading-and-listening"}),k=[{link:"https://www.youtube.com/watch?v=u00Kte9VIR0",subtitle:"[DownSub.com] English Grammar_ Avoid 5 Common Mistakes with THERE IS _ THERE ARE.srt"},{link:"https://www.youtube.com/watch?v=ptVqRCRPN9I",subtitle:"[DownSub.com] Learn English with Movies and TV! _ 5 Powerful Tips from a Master Teacher _ Rachel\u2019s English.srt"},{link:"https://www.youtube.com/watch?v=XfAMirWVpjQ",subtitle:"[DownSub.com] Do I speak slowly_ [How to understand native English speakers].srt"},{link:"https://www.youtube.com/watch?v=TGmhnWaByXE",subtitle:"[DownSub.com] Samsung Galaxy S10 Plus review_ the anti-iPhone.srt"},{link:"https://www.youtube.com/watch?v=9hekJsCOHLU",subtitle:"[DownSub.com] Differentiating Instruction_ A Guide for Teaching English-Language Learners.srt"},{link:"https://www.youtube.com/watch?v=eX2PXjj-KDk",subtitle:"Anders-Hejlsberg-Introducing-TypeScript_en.vtt"},{link:"https://www.youtube.com/watch?v=gLglQ5-Q9FE",subtitle:"[DownSub.com] Harry Potter and The Methods Of Rationality_ Chapter 1.srt"},{link:"https://www.youtube.com/watch?v=tMPPGQCT8mE",subtitle:"[DownSub.com] How to Bunnyhop a MTB - a tutorial.srt"},{link:"https://www.youtube.com/watch?v=kkSBXBSOyoc",subtitle:"[DownSub.com] 2 tricky vowel sounds in British and American English - AH and UH.srt"},{link:"https://www.youtube.com/watch?v=o8NPllzkFhE",subtitle:"[DownSub.com] The mind behind Linux _ Linus Torvalds.srt"},{link:"https://youtu.be/quJdL9ggETI",subtitle:"[DownSub.com] Margaret Gould Stewart_ How giant websites design for you (and a billion others, too).srt"},{link:"https://youtu.be/H2QxFM9y0tY",subtitle:"[DownSub.com] The disarming case to act right now on climate change _ Greta Thunberg.srt"},{link:"https://youtu.be/pj8n78AuN3w",subtitle:"[DownSub.com] YouTube's Rules Don't Apply to Everyone.srt"},{link:"https://youtu.be/jAhjPd4uNFY",subtitle:"[DownSub.com] Genetic Engineering Will Change Everything Forever \u2013 CRISPR.srt"},{link:"https://youtu.be/DHg5j9cTb2k?t=32",subtitle:"[DownSub.com] Genetic Engineering Will Change Everything Forever \u2013 CRISPR.srt"},{link:"https://www.youtube.com/watch?time_continue=0&v=5VE9nihee7o",subtitle:"[DownSub.com] Hillary Clinton_ The Vox Conversation.srt"}];function j(e){var t=e.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|attribution_link\?a=.+?watch.+?v(?:%|=)))((\w|-){11})(?:\S+)?$/);return String(t[1])}!function(e){e.YOUTUBE="youtube",e.AUDIO="audio"}(r||(r={}));var S={items:[],isFetching:!0,add:function(e,t){e.items.push(t)},delete:function(e,t){var n=e.items.findIndex(function(e){return e.id===t});e.items.splice(n,1)},deleteAll:function(e){e.items=[]},setItems:function(e,t){e.items=t},setFetching:function(e,t){e.isFetching=t},clear:Object(p.e)(function(){var e=Object(y.a)(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.deleteAll(null),t.syncWithLocalstorage(null);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),fetch:Object(p.e)(function(){var e=Object(y.a)(w.a.mark(function e(t){var n,a,i,u,o,c,s,l;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setFetching(!0),!(n=localStorage.getItem("app_items"))){e.next=7;break}return a=JSON.parse(n),t.setItems(a),t.setFetching(!1),e.abrupt("return");case 7:i=[],u=0;case 9:if(!(u<k.length)){e.next=20;break}return o=k[u],e.next=13,E.get("/".concat(o.subtitle));case 13:c=e.sent,s=c.data.replace(/(<([^>]+)>)/gi,""),l={id:u,plainSubtitles:s,source:r.YOUTUBE,url:j(o.link)},i.push(l);case 17:u++,e.next=9;break;case 20:t.setItems(i),t.syncWithLocalstorage(null),t.setFetching(!1);case 23:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),syncWithLocalstorage:function(e){localStorage.setItem("app_items",JSON.stringify(e.items))},listeners:Object(p.c)(function(e){e(S.delete,function(e){e.syncWithLocalstorage(null)})})},T=S,_=n(56),C={subtitles:[],isFetching:!0,setSubtitles:function(e,t){e.subtitles=t},setFetching:function(e,t){e.isFetching=t},fetchSubtitlesFromTasksStore:Object(p.e)(function(){var e=Object(y.a)(w.a.mark(function e(t,n,r){var a,i,u,o;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getState(),i=Number(n),u=a.getTaskById(i)){e.next=5;break}return e.abrupt("return");case 5:o=_.parse(u.plainSubtitles),t.setSubtitles(o),t.setFetching(!1);case 8:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}())},x=n(10),I={app:g,tasks:T,player:C,getTaskById:Object(p.d)(function(e){return function(t){var n=e.tasks.items.filter(function(e){return e.id===t});return Object(x.a)(n,1)[0]}})},D=n(32),L=n(57),R=new Promise(function(e){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.onYouTubeIframeAPIReady=function(){return e(window.YT)}}),F=function(e){var t=e.id,n=e.videoId,r=e.events,a=e.playerVars,i=Object(L.a)(e,["id","videoId","events","playerVars"]);return new Promise(function(){var e=Object(y.a)(w.a.mark(function e(u,o){var c,s,l,b;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R;case 2:return c=e.sent,s=null!==document.querySelector("#".concat(t)),l=Object(D.a)({},r,{onReady:function(){u(b)}}),s||console.warn("YouTube hook: div #".concat(t," not found.")),b=new c.Player(t,Object(D.a)({},i,{videoId:n,playerVars:a,events:l})),e.abrupt("return",b);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},P=0;function M(e){return!e||0===e.length}var N=function(e,t){var n=Object(a.useState)(null),r=Object(x.a)(n,2),u=r[0],o=r[1],c=Object(a.useState)(-1),s=Object(x.a)(c,2),l=s[0],b=(s[1],Object(a.useMemo)(function(){return function(e){var t=++P;return String(e)+t}("unq-yt-id-")},[])),f=Object(a.useRef)(null),m=Object(a.useRef)(null),d=Object(a.useRef)(null),h=Object(a.useRef)(null),p=Object(a.useRef)(null),g=Object(a.useRef)(null);Object(a.useEffect)(function(){t&&(f.current=t.events&&t.events.onReady,m.current=t.events&&t.events.onStateChange,d.current=t.events&&t.events.onPlaybackQualityChange,h.current=t.events&&t.events.onPlaybackRateChange,p.current=t.events&&t.events.onError,g.current=t.events&&t.events.onApiChange)});var v=!M(e)&&i.a.createElement("div",{id:b});return Object(a.useEffect)(function(){if(!M(e)){var n=t&&t.playerVars||{},r={width:t.width,height:t.height,id:b,videoId:e,playerVars:n},a={onReady:function(e){return f.current&&f.current(e)},onStateChange:function(e){return m.current&&m.current(e)},onPlaybackQualityChange:function(e){return d.current&&d.current(e)},onPlaybackRateChange:function(e){return h.current&&h.current(e)},onError:function(e){return p.current&&p.current(e)},onApiChange:function(e){return g.current&&g.current(e)}};return u?u.cueVideoById(e):function(){i.apply(this,arguments)}(),function(){console.log("return")}}function i(){return(i=Object(y.a)(w.a.mark(function e(){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(Object(D.a)({},r,{events:a}));case 2:return t=e.sent,f.current&&f.current({target:t}),e.abrupt("return",o(t));case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}},[e]),{video:v,player:u,state:l}},A=n(27),V=n(64),B=n(23),H=n.n(B);function Y(e){return Math.floor(1e3*e)}var G=n(58),q=n.n(G);function U(e,t){Object(a.useEffect)(function(){var n=new q.a(document.body);return n.bind(e,t),function(){n.unbind(e)}},[e])}var W=JSON.stringify;var J=function(e){var t=e.match.params.id,n=Object(p.f)(function(e){return{onFetchSubtitlesFromTasksStore:e.player.fetchSubtitlesFromTasksStore}}).onFetchSubtitlesFromTasksStore,r=(Object(a.useRef)(0),Object(a.useState)(!0)),u=Object(x.a)(r,2),o=u[0],c=(u[1],Object(a.useState)(0)),s=Object(x.a)(c,2),l=s[0],b=(s[1],Object(a.useState)(0)),f=Object(x.a)(b,2),m=f[0],h=f[1],g=Object(a.useState)(!1),v=Object(x.a)(g,2),w=v[0],y=(v[1],Object(p.g)(function(e){return e.getTaskById(Number(t))},[t])),O=Object(p.g)(function(e){return e.tasks},[t]),E=Object(p.g)(function(e){return e.player},[t]);if(Object(a.useEffect)(function(){O.isFetching||n(t)},[t,O.isFetching]),!t)return i.a.createElement(d.a,{to:"/"});var k=Object(A.get)(y,"url"),j=N(k,{width:600,height:200,playerVars:{start:1,fs:0,rel:0,disablekb:1,modestbranding:3},events:{onReady:function(e){e.target.setVolume(100)},onStateChange:function(){!function(){if(T){var e=_(Y(T.getCurrentTime()));h(e)}}()}}}),S=j.video,T=j.player;function _(e){for(var t=0;t<E.subtitles.length;t++){var n=E.subtitles[t];if(e>=n.start&&e<=n.end)return console.log("time.start = ",n.start),console.log("time.end = ",n.end),t}return 0}function C(e){if(T){var t=Y(T.getCurrentTime()),n=_(t);if(void 0!==n){var r=E.subtitles[n],a=E.subtitles[n+1],i=E.subtitles[n-1];if(e){if(!a)return;console.log("Next",a),T.seekTo((a.start-200)/1e3,!0)}else{var u=t-r.start;u<800&&i&&(console.log("Prev",n-1,i),T.seekTo((i.start-200)/1e3,!0)),u>800&&(console.log("Current",r),T.seekTo((r.start-200)/1e3,!0))}}else{var o=E.subtitles[0];T.seekTo(o.start/1e3,!0)}}}if(U(["space"],function(e){e.preventDefault&&e.preventDefault(),T&&(1===T.getPlayerState()?T.pauseVideo():T.playVideo())}),U(["left"],function(){T&&C(!1)}),U(["right"],function(){T&&C(!0)}),U(Object(A.range)(0,10).map(function(e){return String(e)}),function(e){var t=Number(e.key);if(T){var n=T.getDuration()/10*t,r=0===t?0:n;T.seekTo(r,!0)}}),Object(a.useEffect)(function(){var e;if(T)return console.log("Run update = ",Y(T.getCurrentTime())),function t(){if(T){var n=E.subtitles,r=n.length,a=n[m],i=Y(T.getCurrentTime());if(!(r-1<=m)){if(i+50>a.end){var u=m+1;return console.log("set new index",u),void h(u)}e=requestAnimationFrame(t)}}}(),function(){e&&cancelAnimationFrame(e)}},[T,m]),e.location.search){var I=E.subtitles.map(function(e,t){return i.a.createElement("div",{key:t},e.text)});return i.a.createElement("div",{style:{padding:"40px 40px",backgroundColor:"#fff",lineHeight:"25px",fontSize:15}},I)}return i.a.createElement("div",{className:H.a.root},i.a.createElement("div",null,S),i.a.createElement("div",{className:H.a.debugButtons},i.a.createElement(V.a,{onClick:function(){return T.playVideo()},text:"play"}),i.a.createElement(V.a,{onClick:function(){return T.pauseVideo()},text:"pause"}),i.a.createElement(V.a,{onClick:function(){return T.setVolume(10)},text:"set vol"}),i.a.createElement(V.a,{onClick:function(){return T.seekTo(50,!0)},text:"go to 50s"}),i.a.createElement(V.a,{onClick:function(){return localStorage.removeItem("app_items")},text:"Clear LS"})),i.a.createElement("div",{className:H.a.container},i.a.createElement("div",null),i.a.createElement(function(){if(o)return null;var e=E.subtitles[m],t=E.subtitles[m+1];function n(e){return i.a.createElement("div",{className:H.a.SubtitlesDebugItem},i.a.createElement("div",{className:H.a.SubtitlesDebugTime},i.a.createElement("div",null,"start: ",W(Object(A.get)(e,"start"))),i.a.createElement("div",null,"end: ",W(Object(A.get)(e,"end"))),i.a.createElement("div",null,"show?: ",W(w))),i.a.createElement("pre",null,W(Object(A.get)(e,"text"))))}return i.a.createElement("div",{className:H.a.SubtitlesDebug},i.a.createElement("h3",null,"Current: ",m,", time: ",l),n(e),i.a.createElement("h3",null,"Next:"),n(t))},null),i.a.createElement(function(){if(!o)return null;var e=E.subtitles.map(function(e){return e.text}).join(" ").split(".");return i.a.createElement("div",{className:H.a.SubtitlesDebugFullText},e.map(function(e,t){return i.a.createElement("p",{key:t},e,".")}))},null)))};n(108),n(109);function Q(){var e=Object(p.f)(function(e){return{setIsOpenListModal:e.app.setIsOpenListModal}}).setIsOpenListModal;return Object(a.useEffect)(function(){setTimeout(function(){e(!0)},400)},[]),null}var X=n(119),z=n(120),K=n(30),Z=n(61),$=n.n(Z),ee=function(e){return!e},te=function(){var e=Object(a.useState)(!0),t=Object(x.a)(e,2)[1];return function(){t(ee)}},ne=function(){var e=te(),t=Object(a.useContext)(d.d);if(!t)throw new Error("use-react-router may only be used within a react-router context.");return Object(a.useEffect)(function(){return t.history.listen(e)},[t]),t};function re(e){var t=Object(p.g)(function(e){return e.tasks}),n=Object(p.g)(function(e){return e.app.isOpenListModal}),r=ne().history,u=Object(p.f)(function(e){return{onFetch:e.tasks.fetch,onDelete:e.tasks.delete,setIsOpenListModal:e.app.setIsOpenListModal}}),o=u.onFetch,c=u.onDelete,s=u.setIsOpenListModal;function l(){return t.items.map(function(e,t){var n="https://i.ytimg.com/vi/".concat(e.url,"/hqdefault.jpg"),a="https://youtu.be/".concat(e.url);return i.a.createElement("tr",{onClick:function(){return t=e.id,r.push("/play/".concat(t)),void console.log("handleTableRowClick");var t},key:t},i.a.createElement("td",{style:{width:120,textAlign:"center"}},i.a.createElement("a",{href:a,target:"_blank"},i.a.createElement("img",{className:$.a.image,src:n,alt:""}))),i.a.createElement("td",null,i.a.createElement("h4",null,"# ",e.id)),i.a.createElement("td",{style:{width:80,textAlign:"center",verticalAlign:"middle"}},i.a.createElement(V.a,{intent:"danger",icon:"delete",onClick:function(t){return function(e,t){c(t),e.stopPropagation()}(t,e.id)}})))})}return Object(a.useEffect)(function(){o()},[]),i.a.createElement(z.a,{style:{width:"70%"},icon:"info-sign",title:"List",isOpen:n,onClose:function(){return s(!1)},usePortal:!0,className:K.a.OVERLAY_SCROLL_CONTAINER},i.a.createElement("div",{style:{overflow:"scroll",height:"70vh"}},i.a.createElement(X.a,{style:{width:"100%"},interactive:!0,bordered:!0},i.a.createElement("tbody",null,l()))))}function ae(){var e=Object(p.f)(function(e){return{toggleOpenListModal:e.app.toggleOpenListModal,onTaskClear:e.tasks.deleteAll}}),t=e.onTaskClear,n=e.toggleOpenListModal;return U(["shift+j","ctrl+k"],function(){n()}),U(["shift+r"],function(){confirm("Clear LocalStorage?")&&t(void 0)}),i.a.createElement("div",null,i.a.createElement(re,null))}h.a.onlyShowFocusOnTabs();var ie=Object(p.b)(I),ue=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(p.a,{store:ie},i.a.createElement(m.a,{basename:"/training-reading-and-listening"},i.a.createElement("div",null,i.a.createElement(ae,null),i.a.createElement(d.b,{exact:!0,path:"/",component:Q}),i.a.createElement(d.b,{path:"/play/:id",component:J}),i.a.createElement(d.b,{exact:!0,path:"/play",component:J}))))}}]),t}(a.Component);o.a.render(i.a.createElement(ue,null),document.getElementById("root"))},23:function(e,t,n){e.exports={root:"Player_root__3rqwu",container:"Player_container__1Yacn",debugButtons:"Player_debugButtons__21nZT",SubtitlesDebug:"Player_SubtitlesDebug__t0saq",SubtitlesDebugFullText:"Player_SubtitlesDebugFullText__cRonI",SubtitlesDebugItem:"Player_SubtitlesDebugItem__2BZE7",SubtitlesDebugTime:"Player_SubtitlesDebugTime__3Ftel"}},61:function(e,t,n){e.exports={image:"Tasks_image__3yXbi"}},72:function(e,t,n){e.exports=n(117)}},[[72,1,2]]]);
//# sourceMappingURL=main.b8b64e8e.chunk.js.map