(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var r,a=n(0),u=n.n(a),i=n(14),c=n.n(i),o=n(50),s=n(51),l=n(63),f=n(52),b=n(65),d=n(61),m=n(15),h=n(121),p=n(3),g={isOpenListModal:!1,setIsOpenListModal:function(e,t){e.isOpenListModal=t},toggleOpenListModal:function(e){e.isOpenListModal=!e.isOpenListModal}},v=n(9),w=n.n(v),y=n(19),O=n(53),E=n.n(O).a.create({baseURL:"/training-reading-and-listening"}),j=[{link:"https://www.youtube.com/watch?v=u00Kte9VIR0",subtitle:"[DownSub.com] English Grammar_ Avoid 5 Common Mistakes with THERE IS _ THERE ARE.srt"},{link:"https://www.youtube.com/watch?v=ptVqRCRPN9I",subtitle:"[DownSub.com] Learn English with Movies and TV! _ 5 Powerful Tips from a Master Teacher _ Rachel\u2019s English.srt"},{link:"https://www.youtube.com/watch?v=TGmhnWaByXE",subtitle:"[DownSub.com] Samsung Galaxy S10 Plus review_ the anti-iPhone.srt"},{link:"https://www.youtube.com/watch?v=XfAMirWVpjQ",subtitle:"[DownSub.com] Do I speak slowly_ [How to understand native English speakers].srt"},{link:"https://www.youtube.com/watch?v=o8NPllzkFhE",subtitle:"[DownSub.com] The mind behind Linux _ Linus Torvalds.srt"},{link:"https://youtu.be/quJdL9ggETI",subtitle:"[DownSub.com] Margaret Gould Stewart_ How giant websites design for you (and a billion others, too).srt"},{link:"https://youtu.be/H2QxFM9y0tY",subtitle:"[DownSub.com] The disarming case to act right now on climate change _ Greta Thunberg.srt"},{link:"https://youtu.be/pj8n78AuN3w",subtitle:"[DownSub.com] YouTube's Rules Don't Apply to Everyone.srt"},{link:"https://youtu.be/jAhjPd4uNFY",subtitle:"[DownSub.com] Genetic Engineering Will Change Everything Forever \u2013 CRISPR.srt"},{link:"https://youtu.be/DHg5j9cTb2k?t=32",subtitle:"[DownSub.com] Genetic Engineering Will Change Everything Forever \u2013 CRISPR.srt"},{link:"https://www.youtube.com/watch?time_continue=0&v=5VE9nihee7o",subtitle:"[DownSub.com] Hillary Clinton_ The Vox Conversation.srt"}];function k(e){var t=e.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|attribution_link\?a=.+?watch.+?v(?:%|=)))((\w|-){11})(?:\S+)?$/);return String(t[1])}!function(e){e.YOUTUBE="youtube",e.AUDIO="audio"}(r||(r={}));var S={items:[],isFetching:!0,add:function(e,t){e.items.push(t)},delete:function(e,t){var n=e.items.findIndex(function(e){return e.id===t});e.items.splice(n,1)},deleteAll:function(e){e.items=[]},setItems:function(e,t){e.items=t},setFetching:function(e,t){e.isFetching=t},clear:Object(p.e)(function(){var e=Object(y.a)(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.deleteAll(null),t.syncWithLocalstorage(null);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),fetch:Object(p.e)(function(){var e=Object(y.a)(w.a.mark(function e(t){var n,a,u,i,c,o,s;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setFetching(!0),!(n=localStorage.getItem("app_items"))){e.next=7;break}return a=JSON.parse(n),t.setItems(a),t.setFetching(!1),e.abrupt("return");case 7:u=[],i=0;case 9:if(!(i<j.length)){e.next=19;break}return c=j[i],e.next=13,E.get("/".concat(c.subtitle));case 13:o=e.sent,s={id:i,plainSubtitles:o.data,source:r.YOUTUBE,url:k(c.link)},u.push(s);case 16:i++,e.next=9;break;case 19:t.setItems(u),t.syncWithLocalstorage(null),t.setFetching(!1);case 22:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),syncWithLocalstorage:function(e){localStorage.setItem("app_items",JSON.stringify(e.items))},listeners:Object(p.c)(function(e){e(S.delete,function(e){e.syncWithLocalstorage(null)})})},T=S,I=n(56),C={subtitles:[],isFetching:!0,setSubtitles:function(e,t){e.subtitles=t},setFetching:function(e,t){e.isFetching=t},fetchSubtitlesFromTasksStore:Object(p.e)(function(){var e=Object(y.a)(w.a.mark(function e(t,n,r){var a,u,i,c;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getState(),u=Number(n),i=a.getTaskById(u)){e.next=5;break}return e.abrupt("return");case 5:c=I.parse(i.plainSubtitles),t.setSubtitles(c),t.setFetching(!1);case 8:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}())},L=n(8),R={app:g,tasks:T,player:C,getTaskById:Object(p.d)(function(e){return function(t){var n=e.tasks.items.filter(function(e){return e.id===t});return Object(L.a)(n,1)[0]}})},x=n(32),_=n(57),D=new Promise(function(e){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.onYouTubeIframeAPIReady=function(){return e(window.YT)}}),F=function(e){var t=e.id,n=e.videoId,r=e.events,a=e.playerVars,u=Object(_.a)(e,["id","videoId","events","playerVars"]);return new Promise(function(){var e=Object(y.a)(w.a.mark(function e(i,c){var o,s,l,f;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D;case 2:return o=e.sent,s=null!==document.querySelector("#".concat(t)),l=Object(x.a)({},r,{onReady:function(){i(f)}}),s||console.warn("YouTube hook: div #".concat(t," not found.")),f=new o.Player(t,Object(x.a)({},u,{videoId:n,playerVars:a,events:l})),e.abrupt("return",f);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},M=0;function P(e){return!e||0===e.length}var N=function(e,t){var n=Object(a.useState)(null),r=Object(L.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(-1),s=Object(L.a)(o,2),l=s[0],f=(s[1],Object(a.useMemo)(function(){return function(e){var t=++M;return String(e)+t}("unq-yt-id-")},[])),b=Object(a.useRef)(null),d=Object(a.useRef)(null),m=Object(a.useRef)(null),h=Object(a.useRef)(null),p=Object(a.useRef)(null),g=Object(a.useRef)(null);Object(a.useEffect)(function(){t&&(b.current=t.events&&t.events.onReady,d.current=t.events&&t.events.onStateChange,m.current=t.events&&t.events.onPlaybackQualityChange,h.current=t.events&&t.events.onPlaybackRateChange,p.current=t.events&&t.events.onError,g.current=t.events&&t.events.onApiChange)});var v=!P(e)&&u.a.createElement("div",{id:f});return Object(a.useEffect)(function(){if(!P(e)){var n=t&&t.playerVars||{},r={width:t.width,height:t.height,id:f,videoId:e,playerVars:n},a={onReady:function(e){return b.current&&b.current(e)},onStateChange:function(e){return d.current&&d.current(e)},onPlaybackQualityChange:function(e){return m.current&&m.current(e)},onPlaybackRateChange:function(e){return h.current&&h.current(e)},onError:function(e){return p.current&&p.current(e)},onApiChange:function(e){return g.current&&g.current(e)}};return i?i.cueVideoById(e):function(){u.apply(this,arguments)}(),function(){console.log("return")}}function u(){return(u=Object(y.a)(w.a.mark(function e(){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(Object(x.a)({},r,{events:a}));case 2:return t=e.sent,e.abrupt("return",c(t));case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}},[e]),{video:v,player:i,state:l}},A=n(27),V=n(64),B=n(62);function Y(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(a.useRef)(new Set([])),u=Object(a.useRef)({targetKeys:[],callback:function(){},preventDefault:!0});Object(a.useEffect)(function(){u.current={targetKeys:e,callback:t,preventDefault:n}},[].concat(Object(B.a)(e),[t,n]));var i=Object(a.useCallback)(function(e){r.current.add(e.key),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.length!==t.length)return!1;var n=new Set(e);return t.forEach(function(e){n.delete(e)}),0===n.size}(u.current.targetKeys,Array.from(r.current))&&u.current.preventDefault&&(e.preventDefault(),u.current.callback())},[]),c=Object(a.useCallback)(function(e){r.current.delete(e.key)},[]);Object(a.useEffect)(function(){return window.addEventListener("keydown",i),window.addEventListener("keyup",c),function(){window.removeEventListener("keydown",i),window.removeEventListener("keyup",c)}},[i,c])}var W=n(28),G=n.n(W);var H=JSON.stringify;var J=function(e){var t=e.match.params.id,n=Object(p.f)(function(e){return{setIsOpenListModal:e.app.setIsOpenListModal,onFetchSubtitlesFromTasksStore:e.player.fetchSubtitlesFromTasksStore}}).onFetchSubtitlesFromTasksStore,r=(Object(a.useRef)(0),Object(a.useRef)(0),Object(a.useRef)(-1),Object(a.useState)(0)),i=Object(L.a)(r,2),c=i[0],o=i[1],s=Object(a.useState)(0),l=Object(L.a)(s,2),f=(l[0],l[1],Object(a.useState)(-1)),b=Object(L.a)(f,2),d=b[0],h=(b[1],Object(a.useState)(!1)),g=Object(L.a)(h,2),v=g[0],w=(g[1],Object(p.g)(function(e){return e.getTaskById(Number(t))},[t])),y=Object(p.g)(function(e){return e.tasks},[t]),O=Object(p.g)(function(e){return e.player},[t]);if(O.subtitles.length,Object(a.useEffect)(function(){y.isFetching||n(t)},[t,y.isFetching]),!t)return u.a.createElement(m.a,{to:"/"});var E=Object(A.get)(w,"url"),j=N(E,{width:"100%",height:"100%",playerVars:{start:1,fs:0,rel:0,disablekb:1,modestbranding:3}}),k=j.video,S=j.player;function T(e){if(S){console.log("......................",e?"next":"prev");var t=S.getCurrentTime();console.log("plainCurrentTime = ",t);var n=function(e){var t=e.toString().split("."),n=Object(L.a)(t,2),r=n[0],a=n[1],u=String(a+"000").substr(0,3),i="".concat(r).concat(u);return Number(i)}(t),r=function(e){console.log("time = ",e);for(var t=0;t<O.subtitles.length;t++){var n=O.subtitles[t];if(e>=n.start&&e<=n.end)return console.log("time.start = ",n.start),console.log("time.end = ",n.end),t}}(n);if(void 0!==r){var a=O.subtitles[r],u=O.subtitles[r+1],i=O.subtitles[r-1];if(e){if(!u)return;console.log("Next",u),S.seekTo((u.start-200)/1e3,!0)}else{var c=n-a.start;c<800&&i&&(console.log("Prev",i),S.seekTo(i.start/1e3,!0)),c>800&&(console.log("Current",a),S.seekTo(a.start/1e3,!0))}}else{var o=O.subtitles[0];S.seekTo(o.start/1e3,!0)}}}function I(e){var t=Number(e);if(S){var n=S.getDuration()/10*t,r=0===t?0:n;S.seekTo(r,!0)}}return Y([" "],function(){S&&(1===S.getPlayerState()?S.pauseVideo():S.playVideo())}),Y(["ArrowLeft"],function(){S&&T(!1)}),Y(["ArrowRight"],function(){S&&T(!0)}),Y(["1"],function(){return I("1")}),Y(["2"],function(){return I("2")}),Y(["3"],function(){return I("3")}),Y(["4"],function(){return I("4")}),Y(["5"],function(){return I("5")}),Y(["6"],function(){return I("6")}),Y(["7"],function(){return I("7")}),Y(["8"],function(){return I("8")}),Y(["9"],function(){return I("9")}),Y(["0"],function(){return I("0")}),function(e,t){var n=Object(a.useRef)(e);Object(a.useEffect)(function(){n.current=e}),Object(a.useEffect)(function(){if(null!==t){var e=setInterval(function(){n.current()},t);return function(){return clearInterval(e)}}},[t])}(function(){S&&o(S.getCurrentTime())},300),u.a.createElement("div",null,u.a.createElement("div",{style:{height:"100vh"}},k),u.a.createElement(V.a,{onClick:function(){return S.playVideo()},text:"play"}),u.a.createElement(V.a,{onClick:function(){return S.pauseVideo()},text:"pause"}),u.a.createElement(V.a,{onClick:function(){return S.setVolume(70)},text:"set vol"}),u.a.createElement("div",{className:G.a.container},u.a.createElement("div",null),u.a.createElement(function(){var e=O.subtitles[d],t=O.subtitles[d+1];function n(e){return u.a.createElement("div",{className:G.a.SubtitlesDebugItem},u.a.createElement("div",{className:G.a.SubtitlesDebugTime},u.a.createElement("div",null,"start: ",H(Object(A.get)(e,"start"))),u.a.createElement("div",null,"end: ",H(Object(A.get)(e,"end"))),u.a.createElement("div",null,"show?: ",H(v))),u.a.createElement("pre",null,H(Object(A.get)(e,"text"))))}return u.a.createElement("div",{className:G.a.SubtitlesDebug},u.a.createElement("h3",null,"Current: ",d,", time: ",c),n(e),u.a.createElement("h3",null,"Next:"),n(t))},null)))};n(108),n(109);function q(){var e=Object(p.f)(function(e){return{setIsOpenListModal:e.app.setIsOpenListModal}}).setIsOpenListModal;return Object(a.useEffect)(function(){setTimeout(function(){e(!0)},400)},[]),null}var U=n(119),K=n(120),Q=n(30),X=n(60),z=n.n(X),Z=function(e){return!e},$=function(){var e=Object(a.useState)(!0),t=Object(L.a)(e,2)[1];return function(){t(Z)}},ee=function(){var e=$(),t=Object(a.useContext)(m.d);if(!t)throw new Error("use-react-router may only be used within a react-router context.");return Object(a.useEffect)(function(){return t.history.listen(e)},[t]),t};function te(e){var t=Object(p.g)(function(e){return e.tasks}),n=Object(p.g)(function(e){return e.app.isOpenListModal}),r=ee().history,i=Object(p.f)(function(e){return{onFetch:e.tasks.fetch,onDelete:e.tasks.delete,setIsOpenListModal:e.app.setIsOpenListModal}}),c=i.onFetch,o=i.onDelete,s=i.setIsOpenListModal;function l(){return t.items.map(function(e,t){var n="https://i.ytimg.com/vi/".concat(e.url,"/hqdefault.jpg"),a="https://youtu.be/".concat(e.url);return u.a.createElement("tr",{onClick:function(){return t=e.id,r.push("/play/".concat(t)),void console.log("handleTableRowClick");var t},key:t},u.a.createElement("td",{style:{width:120,textAlign:"center"}},u.a.createElement("a",{href:a,target:"_blank"},u.a.createElement("img",{className:z.a.image,src:n,alt:""}))),u.a.createElement("td",null,u.a.createElement("h4",null,"# ",e.id)),u.a.createElement("td",{style:{width:80,textAlign:"center",verticalAlign:"middle"}},u.a.createElement(V.a,{intent:"danger",icon:"delete",onClick:function(t){return function(e,t){o(t),e.stopPropagation()}(t,e.id)}})))})}return Object(a.useEffect)(function(){c()},[]),u.a.createElement(K.a,{style:{width:"70%"},icon:"info-sign",title:"List",isOpen:n,onClose:function(){return s(!1)},usePortal:!0,className:Q.a.OVERLAY_SCROLL_CONTAINER},u.a.createElement("div",{style:{overflow:"scroll",height:"70vh"}},u.a.createElement(U.a,{style:{width:"100%"},interactive:!0,bordered:!0},u.a.createElement("tbody",null,l()))))}function ne(){var e=Object(p.f)(function(e){return{toggleOpenListModal:e.app.toggleOpenListModal,onTaskClear:e.tasks.deleteAll}}),t=e.onTaskClear,n=e.toggleOpenListModal;return Y(["Shift","J"],function(){n()}),Y(["Shift","R"],function(){confirm("Clear LocalStorage?")&&t(void 0)}),u.a.createElement(te,null)}h.a.onlyShowFocusOnTabs();var re=Object(p.b)(R),ae=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement(p.a,{store:re},u.a.createElement(d.a,{basename:"/training-reading-and-listening"},u.a.createElement("div",null,u.a.createElement(m.b,{exact:!0,path:"/",component:q}),u.a.createElement(m.b,{path:"/play/:id",component:J}),u.a.createElement(m.b,{exact:!0,path:"/play",component:J}),u.a.createElement(ne,null))))}}]),t}(a.Component);c.a.render(u.a.createElement(ae,null),document.getElementById("root"))},28:function(e,t,n){e.exports={container:"Player_container__1Yacn",SubtitlesDebug:"Player_SubtitlesDebug__t0saq",SubtitlesDebugItem:"Player_SubtitlesDebugItem__2BZE7",SubtitlesDebugTime:"Player_SubtitlesDebugTime__3Ftel"}},60:function(e,t,n){e.exports={image:"Tasks_image__3yXbi"}},72:function(e,t,n){e.exports=n(117)}},[[72,1,2]]]);
//# sourceMappingURL=main.21bbf195.chunk.js.map